/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e=Symbol(),s=new WeakMap;class i{constructor(t,s,i){if(this._$cssResult$=!0,i!==e)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=s}get styleSheet(){let e=this.o;const i=this.t;if(t&&void 0===e){const t=void 0!==i&&1===i.length;t&&(e=s.get(i)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),t&&s.set(i,e))}return e}toString(){return this.cssText}}const n=t?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let s="";for(const e of t.cssRules)s+=e.cssText;return(t=>new i("string"==typeof t?t:t+"",void 0,e))(s)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var o;const r=window.trustedTypes,a=r?r.emptyScript:"",c=window.reactiveElementPolyfillSupport,l={toAttribute(t,e){switch(e){case Boolean:t=t?a:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let s=t;switch(e){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},h=(t,e)=>e!==t&&(e==e||t==t),d={attribute:!0,type:String,converter:l,reflect:!1,hasChanged:h};class u extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;null!==(e=this.h)&&void 0!==e||(this.h=[]),this.h.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,s)=>{const i=this._$Ep(s,e);void 0!==i&&(this._$Ev.set(i,s),t.push(i))})),t}static createProperty(t,e=d){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const s="symbol"==typeof t?Symbol():"__"+t,i=this.getPropertyDescriptor(t,s,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}}static getPropertyDescriptor(t,e,s){return{get(){return this[e]},set(i){const n=this[t];this[e]=i,this.requestUpdate(t,n,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||d}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of e)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const s=new Set(t.flat(1/0).reverse());for(const t of s)e.unshift(n(t))}else void 0!==t&&e.push(n(t));return e}static _$Ep(t,e){const s=e.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,s;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var e;const s=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,s)=>{t?e.adoptedStyleSheets=s.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):s.forEach((t=>{const s=document.createElement("style"),i=window.litNonce;void 0!==i&&s.setAttribute("nonce",i),s.textContent=t.cssText,e.appendChild(s)}))})(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,s){this._$AK(t,s)}_$EO(t,e,s=d){var i,n;const o=this.constructor._$Ep(t,s);if(void 0!==o&&!0===s.reflect){const r=(null!==(n=null===(i=s.converter)||void 0===i?void 0:i.toAttribute)&&void 0!==n?n:l.toAttribute)(e,s.type);this._$El=t,null==r?this.removeAttribute(o):this.setAttribute(o,r),this._$El=null}}_$AK(t,e){var s,i;const n=this.constructor,o=n._$Ev.get(t);if(void 0!==o&&this._$El!==o){const t=n.getPropertyOptions(o),r=t.converter,a=null!==(i=null!==(s=null==r?void 0:r.fromAttribute)&&void 0!==s?s:"function"==typeof r?r:null)&&void 0!==i?i:l.fromAttribute;this._$El=o,this[o]=a(e,t.type),this._$El=null}}requestUpdate(t,e,s){let i=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||h)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===s.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const s=this._$AL;try{e=this.shouldUpdate(s),e?(this.willUpdate(s),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(s)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(s)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var p;u.finalized=!0,u.elementProperties=new Map,u.elementStyles=[],u.shadowRootOptions={mode:"open"},null==c||c({ReactiveElement:u}),(null!==(o=globalThis.reactiveElementVersions)&&void 0!==o?o:globalThis.reactiveElementVersions=[]).push("1.3.3");const y=globalThis.trustedTypes,f=y?y.createPolicy("lit-html",{createHTML:t=>t}):void 0,g=`lit$${(Math.random()+"").slice(9)}$`,m="?"+g,v=`<${m}>`,w=document,_=(t="")=>w.createComment(t),k=t=>null===t||"object"!=typeof t&&"function"!=typeof t,b=Array.isArray,$=t=>{var e;return b(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])},S=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,E=/-->/g,A=/>/g,C=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,x=/'/g,M=/"/g,B=/^(?:script|style|textarea|title)$/i,D=(t=>(e,...s)=>({_$litType$:t,strings:e,values:s}))(1),T=Symbol.for("lit-noChange"),O=Symbol.for("lit-nothing"),I=new WeakMap,H=w.createTreeWalker(w,129,null,!1),P=(t,e)=>{const s=t.length-1,i=[];let n,o=2===e?"<svg>":"",r=S;for(let e=0;e<s;e++){const s=t[e];let a,c,l=-1,h=0;for(;h<s.length&&(r.lastIndex=h,c=r.exec(s),null!==c);)h=r.lastIndex,r===S?"!--"===c[1]?r=E:void 0!==c[1]?r=A:void 0!==c[2]?(B.test(c[2])&&(n=RegExp("</"+c[2],"g")),r=C):void 0!==c[3]&&(r=C):r===C?">"===c[0]?(r=null!=n?n:S,l=-1):void 0===c[1]?l=-2:(l=r.lastIndex-c[2].length,a=c[1],r=void 0===c[3]?C:'"'===c[3]?M:x):r===M||r===x?r=C:r===E||r===A?r=S:(r=C,n=void 0);const d=r===C&&t[e+1].startsWith("/>")?" ":"";o+=r===S?s+v:l>=0?(i.push(a),s.slice(0,l)+"$lit$"+s.slice(l)+g+d):s+g+(-2===l?(i.push(void 0),e):d)}const a=o+(t[s]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==f?f.createHTML(a):a,i]};class U{constructor({strings:t,_$litType$:e},s){let i;this.parts=[];let n=0,o=0;const r=t.length-1,a=this.parts,[c,l]=P(t,e);if(this.el=U.createElement(c,s),H.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(i=H.nextNode())&&a.length<r;){if(1===i.nodeType){if(i.hasAttributes()){const t=[];for(const e of i.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(g)){const s=l[o++];if(t.push(e),void 0!==s){const t=i.getAttribute(s.toLowerCase()+"$lit$").split(g),e=/([.?@])?(.*)/.exec(s);a.push({type:1,index:n,name:e[2],strings:t,ctor:"."===e[1]?z:"?"===e[1]?q:"@"===e[1]?G:R})}else a.push({type:6,index:n})}for(const e of t)i.removeAttribute(e)}if(B.test(i.tagName)){const t=i.textContent.split(g),e=t.length-1;if(e>0){i.textContent=y?y.emptyScript:"";for(let s=0;s<e;s++)i.append(t[s],_()),H.nextNode(),a.push({type:2,index:++n});i.append(t[e],_())}}}else if(8===i.nodeType)if(i.data===m)a.push({type:2,index:n});else{let t=-1;for(;-1!==(t=i.data.indexOf(g,t+1));)a.push({type:7,index:n}),t+=g.length-1}n++}}static createElement(t,e){const s=w.createElement("template");return s.innerHTML=t,s}}function K(t,e,s=t,i){var n,o,r,a;if(e===T)return e;let c=void 0!==i?null===(n=s._$Cl)||void 0===n?void 0:n[i]:s._$Cu;const l=k(e)?void 0:e._$litDirective$;return(null==c?void 0:c.constructor)!==l&&(null===(o=null==c?void 0:c._$AO)||void 0===o||o.call(c,!1),void 0===l?c=void 0:(c=new l(t),c._$AT(t,s,i)),void 0!==i?(null!==(r=(a=s)._$Cl)&&void 0!==r?r:a._$Cl=[])[i]=c:s._$Cu=c),void 0!==c&&(e=K(t,c._$AS(t,e.values),c,i)),e}class L{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:s},parts:i}=this._$AD,n=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:w).importNode(s,!0);H.currentNode=n;let o=H.nextNode(),r=0,a=0,c=i[0];for(;void 0!==c;){if(r===c.index){let e;2===c.type?e=new N(o,o.nextSibling,this,t):1===c.type?e=new c.ctor(o,c.name,c.strings,this,t):6===c.type&&(e=new F(o,this,t)),this.v.push(e),c=i[++a]}r!==(null==c?void 0:c.index)&&(o=H.nextNode(),r++)}return n}m(t){let e=0;for(const s of this.v)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,e),e+=s.strings.length-2):s._$AI(t[e])),e++}}class N{constructor(t,e,s,i){var n;this.type=2,this._$AH=O,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=s,this.options=i,this._$Cg=null===(n=null==i?void 0:i.isConnected)||void 0===n||n}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=K(this,t,e),k(t)?t===O||null==t||""===t?(this._$AH!==O&&this._$AR(),this._$AH=O):t!==this._$AH&&t!==T&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):$(t)?this.S(t):this.$(t)}M(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==O&&k(this._$AH)?this._$AA.nextSibling.data=t:this.k(w.createTextNode(t)),this._$AH=t}T(t){var e;const{values:s,_$litType$:i}=t,n="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=U.createElement(i.h,this.options)),i);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===n)this._$AH.m(s);else{const t=new L(n,this),e=t.p(this.options);t.m(s),this.k(e),this._$AH=t}}_$AC(t){let e=I.get(t.strings);return void 0===e&&I.set(t.strings,e=new U(t)),e}S(t){b(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let s,i=0;for(const n of t)i===e.length?e.push(s=new N(this.M(_()),this.M(_()),this,this.options)):s=e[i],s._$AI(n),i++;i<e.length&&(this._$AR(s&&s._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class R{constructor(t,e,s,i,n){this.type=1,this._$AH=O,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=n,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=O}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,s,i){const n=this.strings;let o=!1;if(void 0===n)t=K(this,t,e,0),o=!k(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const i=t;let r,a;for(t=n[0],r=0;r<n.length-1;r++)a=K(this,i[s+r],e,r),a===T&&(a=this._$AH[r]),o||(o=!k(a)||a!==this._$AH[r]),a===O?t=O:t!==O&&(t+=(null!=a?a:"")+n[r+1]),this._$AH[r]=a}o&&!i&&this.C(t)}C(t){t===O?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class z extends R{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===O?void 0:t}}const j=y?y.emptyScript:"";class q extends R{constructor(){super(...arguments),this.type=4}C(t){t&&t!==O?this.element.setAttribute(this.name,j):this.element.removeAttribute(this.name)}}class G extends R{constructor(t,e,s,i,n){super(t,e,s,i,n),this.type=5}_$AI(t,e=this){var s;if((t=null!==(s=K(this,t,e,0))&&void 0!==s?s:O)===T)return;const i=this._$AH,n=t===O&&i!==O||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,o=t!==O&&(i===O||n);n&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,s;"function"==typeof this._$AH?this._$AH.call(null!==(s=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class F{constructor(t,e,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){K(this,t)}}const W={L:"$lit$",P:g,V:m,I:1,N:P,R:L,j:$,D:K,H:N,F:R,O:q,W:G,B:z,Z:F},X=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var V,Y;null==X||X(U,N),(null!==(p=globalThis.litHtmlVersions)&&void 0!==p?p:globalThis.litHtmlVersions=[]).push("2.2.6");class J extends u{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const s=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=s.firstChild),s}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,s)=>{var i,n;const o=null!==(i=null==s?void 0:s.renderBefore)&&void 0!==i?i:e;let r=o._$litPart$;if(void 0===r){const t=null!==(n=null==s?void 0:s.renderBefore)&&void 0!==n?n:null;o._$litPart$=r=new N(e.insertBefore(_(),t),t,void 0,null!=s?s:{})}return r._$AI(t),r})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return T}}J.finalized=!0,J._$litElement$=!0,null===(V=globalThis.litElementHydrateSupport)||void 0===V||V.call(globalThis,{LitElement:J});const Z=globalThis.litElementPolyfillSupport;null==Z||Z({LitElement:J}),(null!==(Y=globalThis.litElementVersions)&&void 0!==Y?Y:globalThis.litElementVersions=[]).push("3.2.1");customElements.define("toast-notification",class extends J{static properties={notification:{type:Object}};#t=!1;#e={success:"check",error:"times",warning:"triangle-exclamation"};#s=5e3;#i={};#n;#o;constructor(){super(),this.notification={type:"success",text:"Your changes has been saved"}}createRenderRoot(){return this}open(){this.#t&&(this.#i.style.animation="none",this.#i.style.width="100%",this.#i.style.animation=null,this.#i.classList.remove("active"),this.classList.remove("active"),clearTimeout(this.#n),clearTimeout(this.#o)),this.classList.add("active"),this.#i.classList.add("active"),this.#t=!0,this.#n=setTimeout((()=>{this.classList.remove("active"),this.isOpen=!1}),this.#s),this.#o=setTimeout((()=>this.#i.classList.remove("active")),this.#s+300)}close(){this.classList.remove("active"),clearTimeout(this.#n),clearTimeout(this.#o),setTimeout((()=>this.#i.classList.remove("active")),300),this.#n=null,this.#o=null,this.#t=!1}firstUpdated(){this.#i=this.querySelector(".progress")}render(){const t=this.#e[this.notification.type];return D`<div class="toast-content"><i class="fas fa-solid fa-${t} ${this.notification.type}"></i><div class="toast-message"><span class="text text-1">${this.notification.type.toUpperCase()}</span> <span class="text text-2">${this.notification.text}</span></div></div><i @click="${this.close}" class="fa-solid fa-xmark close hover-font"></i><div class="progress active ${this.notification.type}"></div>`}});class Q extends J{#r=!0;constructor(t=!0){super(),this.#r=t,this.classList="hide modal",this.setAttribute("data-open","false")}createRenderRoot(){return this}toggle(){return"true"===this.getAttribute("data-open")?this.close():this.open()}open(){const t="true"===this.getAttribute("data-open"),e=this.querySelector(".inner-modal");t||requestAnimationFrame((()=>(this.classList.remove("hide"),e.style="animation: fadeUpAnimation 0.3s !important;",this.setAttribute("data-open","true"))))}close(){const t="false"===this.getAttribute("data-open"),e=this.querySelector(".inner-modal");t||(e.style="animation: fadeDownAnimation 0.3s !important;",setTimeout((()=>(e.style="",this.classList.add("hide"),this.setAttribute("data-open","false"))),275))}set({HTML:t}){this.querySelector(".modal-content").innerHTML=t}setAndOpen(t){this.set(t),this.open()}render(t="",e=""){const s=this.#r?D`<small @click="${this.close}" class="close-modal unselectable">close</small>`:D``;return D`<div class="inner-modal">${s}<div class="modal-content">${t}</div><div class="modal-side">${e}</div></div>`}}customElements.define("modal-window",Q);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const tt=2,et=t=>(...e)=>({_$litDirective$:t,values:e});class st{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,s){this._$Ct=t,this._$AM=e,this._$Ci=s}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class it extends st{constructor(t){if(super(t),this.it=O,t.type!==tt)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===O||null==t)return this.ft=void 0,this.it=t;if(t===T)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this.ft;this.it=t;const e=[t];return e.raw=e,this.ft={_$litType$:this.constructor.resultType,strings:e,values:[]}}}it.directiveName="unsafeHTML",it.resultType=1;const nt=et(it),ot=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),rt=!ot,at=Object.freeze({system:"comment-dots",user:"user",group:"users-rectangle",channel:"object-ungroup"}),ct={app:{},menus:{},threads:{},settings:{},user:{},navi:{},header:{},bottomNavi:{},toast:{}};var lt=Object.freeze({THREADSTITLE:"Chats",INVITELINK:'We copied your <a class="highlight-color" href="{{link}}">invite link</a> to your clipboard. Go ahead and share it.',PANICTEXT:'Enter your Be8 id <i class="highlight-color">#{{id}}</i>&nbsp;&nbsp;to destroy your account and everything associated with it. Attention there is no way to restore your data!',CONVERSATION:"Enter a Be8 id to start a 1on1 chatting.",UNLOCKSETUPTEXT:"You have to remind your unlock code otherwise there is no way to access your account again! Enter your destroy code to destroy your acc! There is no way to recover destroyed accs"}),ht={id:"0",nickname:"User Name",expire:"Mon Jan 01 2222 00:00:00 GMT+0000 (Coordinated Universal Time)",type:"user",status:"Status Mockup",endless:!1,codes:!1};class dt{static create(...t){return new this(...t)}mixIn(t){return Object.assign(this,t)}clone(){const t=new this.constructor;return Object.assign(t,this),t}}class ut extends dt{constructor(t=[],e=4*t.length){super();let s=t;if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),(s instanceof Int8Array||s instanceof Uint8ClampedArray||s instanceof Int16Array||s instanceof Uint16Array||s instanceof Int32Array||s instanceof Uint32Array||s instanceof Float32Array||s instanceof Float64Array)&&(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),s instanceof Uint8Array){const t=s.byteLength,e=[];for(let i=0;i<t;i+=1)e[i>>>2]|=s[i]<<24-i%4*8;this.words=e,this.sigBytes=t}else this.words=t,this.sigBytes=e}static random(t){const e=[],s=t=>{let e=t,s=987654321;const i=4294967295;return()=>{s=36969*(65535&s)+(s>>16)&i,e=18e3*(65535&e)+(e>>16)&i;let t=(s<<16)+e&i;return t/=4294967296,t+=.5,t*(Math.random()>.5?1:-1)}};for(let i,n=0;n<t;n+=4){const t=s(4294967296*(i||Math.random()));i=987654071*t(),e.push(4294967296*t()|0)}return new ut(e,t)}toString(t=pt){return t.stringify(this)}concat(t){const e=this.words,s=t.words,i=this.sigBytes,n=t.sigBytes;if(this.clamp(),i%4)for(let t=0;t<n;t+=1){const n=s[t>>>2]>>>24-t%4*8&255;e[i+t>>>2]|=n<<24-(i+t)%4*8}else for(let t=0;t<n;t+=4)e[i+t>>>2]=s[t>>>2];return this.sigBytes+=n,this}clamp(){const{words:t,sigBytes:e}=this;t[e>>>2]&=4294967295<<32-e%4*8,t.length=Math.ceil(e/4)}clone(){const t=super.clone.call(this);return t.words=this.words.slice(0),t}}const pt={stringify(t){const{words:e,sigBytes:s}=t,i=[];for(let t=0;t<s;t+=1){const s=e[t>>>2]>>>24-t%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse(t){const e=t.length,s=[];for(let i=0;i<e;i+=2)s[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new ut(s,e/2)}},yt={stringify(t){const{words:e,sigBytes:s}=t,i=[];for(let t=0;t<s;t+=1){const s=e[t>>>2]>>>24-t%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse(t){const e=t.length,s=[];for(let i=0;i<e;i+=1)s[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new ut(s,e)}},ft={stringify(t){try{return decodeURIComponent(escape(yt.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:t=>yt.parse(unescape(encodeURIComponent(t)))};class gt extends dt{constructor(){super(),this._minBufferSize=0}reset(){this._data=new ut,this._nDataBytes=0}_append(t){let e=t;"string"==typeof e&&(e=ft.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(t){let e;const{_data:s,blockSize:i}=this,n=s.words,o=s.sigBytes;let r=o/(4*i);r=t?Math.ceil(r):Math.max((0|r)-this._minBufferSize,0);const a=r*i,c=Math.min(4*a,o);if(a){for(let t=0;t<a;t+=i)this._doProcessBlock(n,t);e=n.splice(0,a),s.sigBytes-=c}return new ut(e,c)}clone(){const t=super.clone.call(this);return t._data=this._data.clone(),t}}class mt extends gt{constructor(t){super(),this.blockSize=16,this.cfg=Object.assign(new dt,t),this.reset()}static _createHelper(t){return(e,s)=>new t(s).finalize(e)}static _createHmacHelper(t){return(e,s)=>new vt(t,s).finalize(e)}reset(){super.reset.call(this),this._doReset()}update(t){return this._append(t),this._process(),this}finalize(t){t&&this._append(t);return this._doFinalize()}}class vt extends dt{constructor(t,e){super();const s=new t;this._hasher=s;let i=e;"string"==typeof i&&(i=ft.parse(i));const n=s.blockSize,o=4*n;i.sigBytes>o&&(i=s.finalize(e)),i.clamp();const r=i.clone();this._oKey=r;const a=i.clone();this._iKey=a;const c=r.words,l=a.words;for(let t=0;t<n;t+=1)c[t]^=1549556828,l[t]^=909522486;r.sigBytes=o,a.sigBytes=o,this.reset()}reset(){const t=this._hasher;t.reset(),t.update(this._iKey)}update(t){return this._hasher.update(t),this}finalize(t){const e=this._hasher,s=e.finalize(t);e.reset();return e.finalize(this._oKey.clone().concat(s))}}const wt=ut;class _t extends dt{constructor(t,e){super(),this.high=t,this.low=e}}class kt extends dt{constructor(t=[],e=8*t.length){super(),this.words=t,this.sigBytes=e}toX32(){const t=this.words,e=t.length,s=[];for(let i=0;i<e;i+=1){const e=t[i];s.push(e.high),s.push(e.low)}return wt.create(s,this.sigBytes)}clone(){const t=super.clone.call(this);t.words=this.words.slice(0);const{words:e}=t,s=e.length;for(let t=0;t<s;t+=1)e[t]=e[t].clone();return t}}const bt={stringify(t){const{words:e,sigBytes:s}=t,i=this._map;t.clamp();const n=[];for(let t=0;t<s;t+=3){const o=(e[t>>>2]>>>24-t%4*8&255)<<16|(e[t+1>>>2]>>>24-(t+1)%4*8&255)<<8|e[t+2>>>2]>>>24-(t+2)%4*8&255;for(let e=0;e<4&&t+.75*e<s;e+=1)n.push(i.charAt(o>>>6*(3-e)&63))}const o=i.charAt(64);if(o)for(;n.length%4;)n.push(o);return n.join("")},parse(t){let e=t.length;const s=this._map;let i=this._reverseMap;if(!i){this._reverseMap=[],i=this._reverseMap;for(let t=0;t<s.length;t+=1)i[s.charCodeAt(t)]=t}const n=s.charAt(64);if(n){const s=t.indexOf(n);-1!==s&&(e=s)}return((t,e,s)=>{const i=[];let n=0;for(let o=0;o<e;o+=1)if(o%4){const e=s[t.charCodeAt(o-1)]<<o%4*2|s[t.charCodeAt(o)]>>>6-o%4*2;i[n>>>2]|=e<<24-n%4*8,n+=1}return ut.create(i,n)})(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},$t=[];for(let t=0;t<64;t+=1)$t[t]=4294967296*Math.abs(Math.sin(t+1))|0;const St=(t,e,s,i,n,o,r)=>{const a=t+(e&s|~e&i)+n+r;return(a<<o|a>>>32-o)+e},Et=(t,e,s,i,n,o,r)=>{const a=t+(e&i|s&~i)+n+r;return(a<<o|a>>>32-o)+e},At=(t,e,s,i,n,o,r)=>{const a=t+(e^s^i)+n+r;return(a<<o|a>>>32-o)+e},Ct=(t,e,s,i,n,o,r)=>{const a=t+(s^(e|~i))+n+r;return(a<<o|a>>>32-o)+e};class xt extends mt{_doReset(){this._hash=new ut([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(t,e){const s=t;for(let i=0;i<16;i+=1){const n=e+i,o=t[n];s[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}const i=this._hash.words,n=s[e+0],o=s[e+1],r=s[e+2],a=s[e+3],c=s[e+4],l=s[e+5],h=s[e+6],d=s[e+7],u=s[e+8],p=s[e+9],y=s[e+10],f=s[e+11],g=s[e+12],m=s[e+13],v=s[e+14],w=s[e+15];let _=i[0],k=i[1],b=i[2],$=i[3];_=St(_,k,b,$,n,7,$t[0]),$=St($,_,k,b,o,12,$t[1]),b=St(b,$,_,k,r,17,$t[2]),k=St(k,b,$,_,a,22,$t[3]),_=St(_,k,b,$,c,7,$t[4]),$=St($,_,k,b,l,12,$t[5]),b=St(b,$,_,k,h,17,$t[6]),k=St(k,b,$,_,d,22,$t[7]),_=St(_,k,b,$,u,7,$t[8]),$=St($,_,k,b,p,12,$t[9]),b=St(b,$,_,k,y,17,$t[10]),k=St(k,b,$,_,f,22,$t[11]),_=St(_,k,b,$,g,7,$t[12]),$=St($,_,k,b,m,12,$t[13]),b=St(b,$,_,k,v,17,$t[14]),k=St(k,b,$,_,w,22,$t[15]),_=Et(_,k,b,$,o,5,$t[16]),$=Et($,_,k,b,h,9,$t[17]),b=Et(b,$,_,k,f,14,$t[18]),k=Et(k,b,$,_,n,20,$t[19]),_=Et(_,k,b,$,l,5,$t[20]),$=Et($,_,k,b,y,9,$t[21]),b=Et(b,$,_,k,w,14,$t[22]),k=Et(k,b,$,_,c,20,$t[23]),_=Et(_,k,b,$,p,5,$t[24]),$=Et($,_,k,b,v,9,$t[25]),b=Et(b,$,_,k,a,14,$t[26]),k=Et(k,b,$,_,u,20,$t[27]),_=Et(_,k,b,$,m,5,$t[28]),$=Et($,_,k,b,r,9,$t[29]),b=Et(b,$,_,k,d,14,$t[30]),k=Et(k,b,$,_,g,20,$t[31]),_=At(_,k,b,$,l,4,$t[32]),$=At($,_,k,b,u,11,$t[33]),b=At(b,$,_,k,f,16,$t[34]),k=At(k,b,$,_,v,23,$t[35]),_=At(_,k,b,$,o,4,$t[36]),$=At($,_,k,b,c,11,$t[37]),b=At(b,$,_,k,d,16,$t[38]),k=At(k,b,$,_,y,23,$t[39]),_=At(_,k,b,$,m,4,$t[40]),$=At($,_,k,b,n,11,$t[41]),b=At(b,$,_,k,a,16,$t[42]),k=At(k,b,$,_,h,23,$t[43]),_=At(_,k,b,$,p,4,$t[44]),$=At($,_,k,b,g,11,$t[45]),b=At(b,$,_,k,w,16,$t[46]),k=At(k,b,$,_,r,23,$t[47]),_=Ct(_,k,b,$,n,6,$t[48]),$=Ct($,_,k,b,d,10,$t[49]),b=Ct(b,$,_,k,v,15,$t[50]),k=Ct(k,b,$,_,l,21,$t[51]),_=Ct(_,k,b,$,g,6,$t[52]),$=Ct($,_,k,b,a,10,$t[53]),b=Ct(b,$,_,k,y,15,$t[54]),k=Ct(k,b,$,_,o,21,$t[55]),_=Ct(_,k,b,$,u,6,$t[56]),$=Ct($,_,k,b,w,10,$t[57]),b=Ct(b,$,_,k,h,15,$t[58]),k=Ct(k,b,$,_,m,21,$t[59]),_=Ct(_,k,b,$,c,6,$t[60]),$=Ct($,_,k,b,f,10,$t[61]),b=Ct(b,$,_,k,r,15,$t[62]),k=Ct(k,b,$,_,p,21,$t[63]),i[0]=i[0]+_|0,i[1]=i[1]+k|0,i[2]=i[2]+b|0,i[3]=i[3]+$|0}_doFinalize(){const t=this._data,e=t.words,s=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32;const n=Math.floor(s/4294967296),o=s;e[15+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(e.length+1),this._process();const r=this._hash,a=r.words;for(let t=0;t<4;t+=1){const e=a[t];a[t]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8)}return r}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const Mt=mt._createHelper(xt),Bt=mt._createHmacHelper(xt);class Dt extends dt{constructor(t){super(),this.cfg=Object.assign(new dt,{keySize:4,hasher:xt,iterations:1},t)}compute(t,e){let s;const{cfg:i}=this,n=i.hasher.create(),o=ut.create(),r=o.words,{keySize:a,iterations:c}=i;for(;r.length<a;){s&&n.update(s),s=n.update(t).finalize(e),n.reset();for(let t=1;t<c;t+=1)s=n.finalize(s),n.reset();o.concat(s)}return o.sigBytes=4*a,o}}class Tt extends gt{constructor(t,e,s){super(),this.cfg=Object.assign(new dt,s),this._xformMode=t,this._key=e,this.reset()}static createEncryptor(t,e){return this.create(this._ENC_XFORM_MODE,t,e)}static createDecryptor(t,e){return this.create(this._DEC_XFORM_MODE,t,e)}static _createHelper(t){const e=t=>"string"==typeof t?jt:Rt;return{encrypt:(s,i,n)=>e(i).encrypt(t,s,i,n),decrypt:(s,i,n)=>e(i).decrypt(t,s,i,n)}}reset(){super.reset.call(this),this._doReset()}process(t){return this._append(t),this._process()}finalize(t){t&&this._append(t);return this._doFinalize()}}Tt._ENC_XFORM_MODE=1,Tt._DEC_XFORM_MODE=2,Tt.keySize=4,Tt.ivSize=4;class Ot extends Tt{constructor(...t){super(...t),this.blockSize=1}_doFinalize(){return this._process(!0)}}class It extends dt{constructor(t,e){super(),this._cipher=t,this._iv=e}static createEncryptor(t,e){return this.Encryptor.create(t,e)}static createDecryptor(t,e){return this.Decryptor.create(t,e)}}function Ht(t,e,s){const i=t;let n;const o=this._iv;o?(n=o,this._iv=void 0):n=this._prevBlock;for(let t=0;t<s;t+=1)i[e+t]^=n[t]}class Pt extends It{}Pt.Encryptor=class extends Pt{processBlock(t,e){const s=this._cipher,{blockSize:i}=s;Ht.call(this,t,e,i),s.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}},Pt.Decryptor=class extends Pt{processBlock(t,e){const s=this._cipher,{blockSize:i}=s,n=t.slice(e,e+i);s.decryptBlock(t,e),Ht.call(this,t,e,i),this._prevBlock=n}};const Ut={pad(t,e){const s=4*e,i=s-t.sigBytes%s,n=i<<24|i<<16|i<<8|i,o=[];for(let t=0;t<i;t+=4)o.push(n);const r=ut.create(o,i);t.concat(r)},unpad(t){const e=t,s=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=s}};class Kt extends Tt{constructor(t,e,s){super(t,e,Object.assign({mode:Pt,padding:Ut},s)),this.blockSize=4}reset(){let t;super.reset.call(this);const{cfg:e}=this,{iv:s,mode:i}=e;this._xformMode===this.constructor._ENC_XFORM_MODE?t=i.createEncryptor:(t=i.createDecryptor,this._minBufferSize=1),this._mode=t.call(i,this,s&&s.words),this._mode.__creator=t}_doProcessBlock(t,e){this._mode.processBlock(t,e)}_doFinalize(){let t;const{padding:e}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t}}class Lt extends dt{constructor(t){super(),this.mixIn(t)}toString(t){return(t||this.formatter).stringify(this)}}const Nt={stringify(t){let e;const{ciphertext:s,salt:i}=t;return e=i?ut.create([1398893684,1701076831]).concat(i).concat(s):s,e.toString(bt)},parse(t){let e;const s=bt.parse(t),i=s.words;return 1398893684===i[0]&&1701076831===i[1]&&(e=ut.create(i.slice(2,4)),i.splice(0,4),s.sigBytes-=16),Lt.create({ciphertext:s,salt:e})}};class Rt extends dt{static encrypt(t,e,s,i){const n=Object.assign(new dt,this.cfg,i),o=t.createEncryptor(s,n),r=o.finalize(e),a=o.cfg;return Lt.create({ciphertext:r,key:s,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:o.blockSize,formatter:n.format})}static decrypt(t,e,s,i){let n=e;const o=Object.assign(new dt,this.cfg,i);n=this._parse(n,o.format);return t.createDecryptor(s,o).finalize(n.ciphertext)}static _parse(t,e){return"string"==typeof t?e.parse(t,this):t}}Rt.cfg=Object.assign(new dt,{format:Nt});const zt={execute(t,e,s,i){let n=i;n||(n=ut.random(8));const o=Dt.create({keySize:e+s}).compute(t,n),r=ut.create(o.words.slice(e),4*s);return o.sigBytes=4*e,Lt.create({key:o,iv:r,salt:n})}};class jt extends Rt{static encrypt(t,e,s,i){const n=Object.assign(new dt,this.cfg,i),o=n.kdf.execute(s,t.keySize,t.ivSize);n.iv=o.iv;const r=Rt.encrypt.call(this,t,e,o.key,n);return r.mixIn(o),r}static decrypt(t,e,s,i){let n=e;const o=Object.assign(new dt,this.cfg,i);n=this._parse(n,o.format);const r=o.kdf.execute(s,t.keySize,t.ivSize,n.salt);o.iv=r.iv;return Rt.decrypt.call(this,t,n,r.key,o)}}jt.cfg=Object.assign(Rt.cfg,{kdf:zt});const qt=t=>t<<8&4278255360|t>>>8&16711935,Gt={stringify(t){const{words:e,sigBytes:s}=t,i=[];for(let t=0;t<s;t+=2){const s=e[t>>>2]>>>16-t%4*8&65535;i.push(String.fromCharCode(s))}return i.join("")},parse(t){const e=t.length,s=[];for(let i=0;i<e;i+=1)s[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return ut.create(s,2*e)}},Ft=Gt,Wt={stringify(t){const{words:e,sigBytes:s}=t,i=[];for(let t=0;t<s;t+=2){const s=qt(e[t>>>2]>>>16-t%4*8&65535);i.push(String.fromCharCode(s))}return i.join("")},parse(t){const e=t.length,s=[];for(let i=0;i<e;i+=1)s[i>>>1]|=qt(t.charCodeAt(i)<<16-i%2*16);return ut.create(s,2*e)}},Xt=[];class Vt extends mt{_doReset(){this._hash=new ut([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(t,e){const s=this._hash.words;let i=s[0],n=s[1],o=s[2],r=s[3],a=s[4];for(let s=0;s<80;s+=1){if(s<16)Xt[s]=0|t[e+s];else{const t=Xt[s-3]^Xt[s-8]^Xt[s-14]^Xt[s-16];Xt[s]=t<<1|t>>>31}let c=(i<<5|i>>>27)+a+Xt[s];c+=s<20?1518500249+(n&o|~n&r):s<40?1859775393+(n^o^r):s<60?(n&o|n&r|o&r)-1894007588:(n^o^r)-899497514,a=r,r=o,o=n<<30|n>>>2,n=i,i=c}s[0]=s[0]+i|0,s[1]=s[1]+n|0,s[2]=s[2]+o|0,s[3]=s[3]+r|0,s[4]=s[4]+a|0}_doFinalize(){const t=this._data,e=t.words,s=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(s/4294967296),e[15+(i+64>>>9<<4)]=s,t.sigBytes=4*e.length,this._process(),this._hash}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const Yt=mt._createHelper(Vt),Jt=mt._createHmacHelper(Vt),Zt=[],Qt=[],te=t=>{const e=Math.sqrt(t);for(let s=2;s<=e;s+=1)if(!(t%s))return!1;return!0},ee=t=>4294967296*(t-(0|t))|0;let se=2,ie=0;for(;ie<64;)te(se)&&(ie<8&&(Zt[ie]=ee(se**.5)),Qt[ie]=ee(se**(1/3)),ie+=1),se+=1;const ne=[];class oe extends mt{_doReset(){this._hash=new ut(Zt.slice(0))}_doProcessBlock(t,e){const s=this._hash.words;let i=s[0],n=s[1],o=s[2],r=s[3],a=s[4],c=s[5],l=s[6],h=s[7];for(let s=0;s<64;s+=1){if(s<16)ne[s]=0|t[e+s];else{const t=ne[s-15],e=(t<<25|t>>>7)^(t<<14|t>>>18)^t>>>3,i=ne[s-2],n=(i<<15|i>>>17)^(i<<13|i>>>19)^i>>>10;ne[s]=e+ne[s-7]+n+ne[s-16]}const d=i&n^i&o^n&o,u=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),p=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&l)+Qt[s]+ne[s];h=l,l=c,c=a,a=r+p|0,r=o,o=n,n=i,i=p+(u+d)|0}s[0]=s[0]+i|0,s[1]=s[1]+n|0,s[2]=s[2]+o|0,s[3]=s[3]+r|0,s[4]=s[4]+a|0,s[5]=s[5]+c|0,s[6]=s[6]+l|0,s[7]=s[7]+h|0}_doFinalize(){const t=this._data,e=t.words,s=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(s/4294967296),e[15+(i+64>>>9<<4)]=s,t.sigBytes=4*e.length,this._process(),this._hash}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const re=mt._createHelper(oe),ae=mt._createHmacHelper(oe);class ce extends oe{_doReset(){this._hash=new ut([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])}_doFinalize(){const t=super._doFinalize.call(this);return t.sigBytes-=4,t}}const le=oe._createHelper(ce),he=oe._createHmacHelper(ce),de=[new _t(1116352408,3609767458),new _t(1899447441,602891725),new _t(3049323471,3964484399),new _t(3921009573,2173295548),new _t(961987163,4081628472),new _t(1508970993,3053834265),new _t(2453635748,2937671579),new _t(2870763221,3664609560),new _t(3624381080,2734883394),new _t(310598401,1164996542),new _t(607225278,1323610764),new _t(1426881987,3590304994),new _t(1925078388,4068182383),new _t(2162078206,991336113),new _t(2614888103,633803317),new _t(3248222580,3479774868),new _t(3835390401,2666613458),new _t(4022224774,944711139),new _t(264347078,2341262773),new _t(604807628,2007800933),new _t(770255983,1495990901),new _t(1249150122,1856431235),new _t(1555081692,3175218132),new _t(1996064986,2198950837),new _t(2554220882,3999719339),new _t(2821834349,766784016),new _t(2952996808,2566594879),new _t(3210313671,3203337956),new _t(3336571891,1034457026),new _t(3584528711,2466948901),new _t(113926993,3758326383),new _t(338241895,168717936),new _t(666307205,1188179964),new _t(773529912,1546045734),new _t(1294757372,1522805485),new _t(1396182291,2643833823),new _t(1695183700,2343527390),new _t(1986661051,1014477480),new _t(2177026350,1206759142),new _t(2456956037,344077627),new _t(2730485921,1290863460),new _t(2820302411,3158454273),new _t(3259730800,3505952657),new _t(3345764771,106217008),new _t(3516065817,3606008344),new _t(3600352804,1432725776),new _t(4094571909,1467031594),new _t(275423344,851169720),new _t(430227734,3100823752),new _t(506948616,1363258195),new _t(659060556,3750685593),new _t(883997877,3785050280),new _t(958139571,3318307427),new _t(1322822218,3812723403),new _t(1537002063,2003034995),new _t(1747873779,3602036899),new _t(1955562222,1575990012),new _t(2024104815,1125592928),new _t(2227730452,2716904306),new _t(2361852424,442776044),new _t(2428436474,593698344),new _t(2756734187,3733110249),new _t(3204031479,2999351573),new _t(3329325298,3815920427),new _t(3391569614,3928383900),new _t(3515267271,566280711),new _t(3940187606,3454069534),new _t(4118630271,4000239992),new _t(116418474,1914138554),new _t(174292421,2731055270),new _t(289380356,3203993006),new _t(460393269,320620315),new _t(685471733,587496836),new _t(852142971,1086792851),new _t(1017036298,365543100),new _t(1126000580,2618297676),new _t(1288033470,3409855158),new _t(1501505948,4234509866),new _t(1607167915,987167468),new _t(1816402316,1246189591)],ue=[];for(let t=0;t<80;t+=1)ue[t]=new _t;class pe extends mt{constructor(){super(),this.blockSize=32}_doReset(){this._hash=new kt([new _t(1779033703,4089235720),new _t(3144134277,2227873595),new _t(1013904242,4271175723),new _t(2773480762,1595750129),new _t(1359893119,2917565137),new _t(2600822924,725511199),new _t(528734635,4215389547),new _t(1541459225,327033209)])}_doProcessBlock(t,e){const s=this._hash.words,i=s[0],n=s[1],o=s[2],r=s[3],a=s[4],c=s[5],l=s[6],h=s[7],d=i.high;let u=i.low;const p=n.high;let y=n.low;const f=o.high;let g=o.low;const m=r.high;let v=r.low;const w=a.high;let _=a.low;const k=c.high;let b=c.low;const $=l.high;let S=l.low;const E=h.high;let A=h.low,C=d,x=u,M=p,B=y,D=f,T=g,O=m,I=v,H=w,P=_,U=k,K=b,L=$,N=S,R=E,z=A;for(let s=0;s<80;s+=1){let i,n;const o=ue[s];if(s<16)o.high=0|t[e+2*s],n=o.high,o.low=0|t[e+2*s+1],i=o.low;else{const t=ue[s-15],e=t.high,r=t.low,a=(e>>>1|r<<31)^(e>>>8|r<<24)^e>>>7,c=(r>>>1|e<<31)^(r>>>8|e<<24)^(r>>>7|e<<25),l=ue[s-2],h=l.high,d=l.low,u=(h>>>19|d<<13)^(h<<3|d>>>29)^h>>>6,p=(d>>>19|h<<13)^(d<<3|h>>>29)^(d>>>6|h<<26),y=ue[s-7],f=y.high,g=y.low,m=ue[s-16],v=m.high,w=m.low;i=c+g,n=a+f+(i>>>0<c>>>0?1:0),i+=p,n=n+u+(i>>>0<p>>>0?1:0),i+=w,n=n+v+(i>>>0<w>>>0?1:0),o.high=n,o.low=i}const r=H&U^~H&L,a=P&K^~P&N,c=C&M^C&D^M&D,l=x&B^x&T^B&T,h=(C>>>28|x<<4)^(C<<30|x>>>2)^(C<<25|x>>>7),d=(x>>>28|C<<4)^(x<<30|C>>>2)^(x<<25|C>>>7),u=(H>>>14|P<<18)^(H>>>18|P<<14)^(H<<23|P>>>9),p=(P>>>14|H<<18)^(P>>>18|H<<14)^(P<<23|H>>>9),y=de[s],f=y.high,g=y.low;let m=z+p,v=R+u+(m>>>0<z>>>0?1:0);m+=a,v=v+r+(m>>>0<a>>>0?1:0),m+=g,v=v+f+(m>>>0<g>>>0?1:0),m+=i,v=v+n+(m>>>0<i>>>0?1:0);const w=d+l;R=L,z=N,L=U,N=K,U=H,K=P,P=I+m|0,H=O+v+(P>>>0<I>>>0?1:0)|0,O=D,I=T,D=M,T=B,M=C,B=x,x=m+w|0,C=v+(h+c+(w>>>0<d>>>0?1:0))+(x>>>0<m>>>0?1:0)|0}i.low=u+x,u=i.low,i.high=d+C+(u>>>0<x>>>0?1:0),n.low=y+B,y=n.low,n.high=p+M+(y>>>0<B>>>0?1:0),o.low=g+T,g=o.low,o.high=f+D+(g>>>0<T>>>0?1:0),r.low=v+I,v=r.low,r.high=m+O+(v>>>0<I>>>0?1:0),a.low=_+P,_=a.low,a.high=w+H+(_>>>0<P>>>0?1:0),c.low=b+K,b=c.low,c.high=k+U+(b>>>0<K>>>0?1:0),l.low=S+N,S=l.low,l.high=$+L+(S>>>0<N>>>0?1:0),h.low=A+z,A=h.low,h.high=E+R+(A>>>0<z>>>0?1:0)}_doFinalize(){const t=this._data,e=t.words,s=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[30+(i+128>>>10<<5)]=Math.floor(s/4294967296),e[31+(i+128>>>10<<5)]=s,t.sigBytes=4*e.length,this._process();return this._hash.toX32()}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const ye=mt._createHelper(pe),fe=mt._createHmacHelper(pe);class ge extends pe{_doReset(){this._hash=new kt([new _t(3418070365,3238371032),new _t(1654270250,914150663),new _t(2438529370,812702999),new _t(355462360,4144912697),new _t(1731405415,4290775857),new _t(2394180231,1750603025),new _t(3675008525,1694076839),new _t(1203062813,3204075428)])}_doFinalize(){const t=super._doFinalize.call(this);return t.sigBytes-=16,t}}const me=pe._createHelper(ge),ve=pe._createHmacHelper(ge),we=[],_e=[],ke=[];let be=1,$e=0;for(let t=0;t<24;t+=1){we[be+5*$e]=(t+1)*(t+2)/2%64;const e=(2*be+3*$e)%5;be=$e%5,$e=e}for(let t=0;t<5;t+=1)for(let e=0;e<5;e+=1)_e[t+5*e]=e+(2*t+3*e)%5*5;let Se=1;for(let t=0;t<24;t+=1){let e=0,s=0;for(let t=0;t<7;t+=1){if(1&Se){const i=(1<<t)-1;i<32?s^=1<<i:e^=1<<i-32}128&Se?Se=Se<<1^113:Se<<=1}ke[t]=_t.create(e,s)}const Ee=[];for(let t=0;t<25;t+=1)Ee[t]=_t.create();class Ae extends mt{constructor(t){super(Object.assign({outputLength:512},t))}_doReset(){this._state=[];const t=this._state;for(let e=0;e<25;e+=1)t[e]=new _t;this.blockSize=(1600-2*this.cfg.outputLength)/32}_doProcessBlock(t,e){const s=this._state,i=this.blockSize/2;for(let n=0;n<i;n+=1){let i=t[e+2*n],o=t[e+2*n+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);const r=s[n];r.high^=o,r.low^=i}for(let t=0;t<24;t+=1){for(let t=0;t<5;t+=1){let e=0,i=0;for(let n=0;n<5;n+=1){const o=s[t+5*n];e^=o.high,i^=o.low}const n=Ee[t];n.high=e,n.low=i}for(let t=0;t<5;t+=1){const e=Ee[(t+4)%5],i=Ee[(t+1)%5],n=i.high,o=i.low,r=e.high^(n<<1|o>>>31),a=e.low^(o<<1|n>>>31);for(let e=0;e<5;e+=1){const i=s[t+5*e];i.high^=r,i.low^=a}}for(let t=1;t<25;t+=1){let e,i;const n=s[t],o=n.high,r=n.low,a=we[t];a<32?(e=o<<a|r>>>32-a,i=r<<a|o>>>32-a):(e=r<<a-32|o>>>64-a,i=o<<a-32|r>>>64-a);const c=Ee[_e[t]];c.high=e,c.low=i}const e=Ee[0],i=s[0];e.high=i.high,e.low=i.low;for(let t=0;t<5;t+=1)for(let e=0;e<5;e+=1){const i=t+5*e,n=s[i],o=Ee[i],r=Ee[(t+1)%5+5*e],a=Ee[(t+2)%5+5*e];n.high=o.high^~r.high&a.high,n.low=o.low^~r.low&a.low}const n=s[0],o=ke[t];n.high^=o.high,n.low^=o.low}}_doFinalize(){const t=this._data,e=t.words,s=8*t.sigBytes,i=32*this.blockSize;e[s>>>5]|=1<<24-s%32,e[(Math.ceil((s+1)/i)*i>>>5)-1]|=128,t.sigBytes=4*e.length,this._process();const n=this._state,o=this.cfg.outputLength/8,r=o/8,a=[];for(let t=0;t<r;t+=1){const e=n[t];let s=e.high,i=e.low;s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a.push(i),a.push(s)}return new ut(a,o)}clone(){const t=super.clone.call(this);t._state=this._state.slice(0);const e=t._state;for(let t=0;t<25;t+=1)e[t]=e[t].clone();return t}}const Ce=mt._createHelper(Ae),xe=mt._createHmacHelper(Ae),Me=ut.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),Be=ut.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),De=ut.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),Te=ut.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),Oe=ut.create([0,1518500249,1859775393,2400959708,2840853838]),Ie=ut.create([1352829926,1548603684,1836072691,2053994217,0]),He=(t,e,s)=>t^e^s,Pe=(t,e,s)=>t&e|~t&s,Ue=(t,e,s)=>(t|~e)^s,Ke=(t,e,s)=>t&s|e&~s,Le=(t,e,s)=>t^(e|~s),Ne=(t,e)=>t<<e|t>>>32-e;class Re extends mt{_doReset(){this._hash=ut.create([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(t,e){const s=t;for(let t=0;t<16;t+=1){const i=e+t,n=s[i];s[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}const i=this._hash.words,n=Oe.words,o=Ie.words,r=Me.words,a=Be.words,c=De.words,l=Te.words;let h,d=i[0],u=i[1],p=i[2],y=i[3],f=i[4],g=i[0],m=i[1],v=i[2],w=i[3],_=i[4];for(let t=0;t<80;t+=1)h=d+s[e+r[t]]|0,h+=t<16?He(u,p,y)+n[0]:t<32?Pe(u,p,y)+n[1]:t<48?Ue(u,p,y)+n[2]:t<64?Ke(u,p,y)+n[3]:Le(u,p,y)+n[4],h|=0,h=Ne(h,c[t]),h=h+f|0,d=f,f=y,y=Ne(p,10),p=u,u=h,h=g+s[e+a[t]]|0,h+=t<16?Le(m,v,w)+o[0]:t<32?Ke(m,v,w)+o[1]:t<48?Ue(m,v,w)+o[2]:t<64?Pe(m,v,w)+o[3]:He(m,v,w)+o[4],h|=0,h=Ne(h,l[t]),h=h+_|0,g=_,_=w,w=Ne(v,10),v=m,m=h;h=i[1]+p+w|0,i[1]=i[2]+y+_|0,i[2]=i[3]+f+g|0,i[3]=i[4]+d+m|0,i[4]=i[0]+u+v|0,i[0]=h}_doFinalize(){const t=this._data,e=t.words,s=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(e.length+1),this._process();const n=this._hash,o=n.words;for(let t=0;t<5;t+=1){const e=o[t];o[t]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8)}return n}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}const ze=mt._createHelper(Re),je=mt._createHmacHelper(Re);class qe extends dt{constructor(t){super(),this.cfg=Object.assign(new dt,{keySize:4,hasher:Vt,iterations:1},t)}compute(t,e){const{cfg:s}=this,i=vt.create(s.hasher,t),n=ut.create(),o=ut.create([1]),r=n.words,a=o.words,{keySize:c,iterations:l}=s;for(;r.length<c;){const t=i.update(e).finalize(o);i.reset();const s=t.words,r=s.length;let c=t;for(let t=1;t<l;t+=1){c=i.finalize(c),i.reset();const t=c.words;for(let e=0;e<r;e+=1)s[e]^=t[e]}n.concat(t),a[0]+=1}return n.sigBytes=4*c,n}}const Ge=[],Fe=[],We=[],Xe=[],Ve=[],Ye=[],Je=[],Ze=[],Qe=[],ts=[],es=[];for(let t=0;t<256;t+=1)es[t]=t<128?t<<1:t<<1^283;let ss=0,is=0;for(let t=0;t<256;t+=1){let t=is^is<<1^is<<2^is<<3^is<<4;t=t>>>8^255&t^99,Ge[ss]=t,Fe[t]=ss;const e=es[ss],s=es[e],i=es[s];let n=257*es[t]^16843008*t;We[ss]=n<<24|n>>>8,Xe[ss]=n<<16|n>>>16,Ve[ss]=n<<8|n>>>24,Ye[ss]=n,n=16843009*i^65537*s^257*e^16843008*ss,Je[t]=n<<24|n>>>8,Ze[t]=n<<16|n>>>16,Qe[t]=n<<8|n>>>24,ts[t]=n,ss?(ss=e^es[es[es[i^e]]],is^=es[es[is]]):(is=1,ss=is)}const ns=[0,1,2,4,8,16,32,64,128,27,54];class os extends Kt{_doReset(){let t;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;const e=this._keyPriorReset,s=e.words,i=e.sigBytes/4;this._nRounds=i+6;const n=4*(this._nRounds+1);this._keySchedule=[];const o=this._keySchedule;for(let e=0;e<n;e+=1)e<i?o[e]=s[e]:(t=o[e-1],e%i?i>6&&e%i==4&&(t=Ge[t>>>24]<<24|Ge[t>>>16&255]<<16|Ge[t>>>8&255]<<8|Ge[255&t]):(t=t<<8|t>>>24,t=Ge[t>>>24]<<24|Ge[t>>>16&255]<<16|Ge[t>>>8&255]<<8|Ge[255&t],t^=ns[e/i|0]<<24),o[e]=o[e-i]^t);this._invKeySchedule=[];const r=this._invKeySchedule;for(let e=0;e<n;e+=1){const s=n-e;t=e%4?o[s]:o[s-4],r[e]=e<4||s<=4?t:Je[Ge[t>>>24]]^Ze[Ge[t>>>16&255]]^Qe[Ge[t>>>8&255]]^ts[Ge[255&t]]}}encryptBlock(t,e){this._doCryptBlock(t,e,this._keySchedule,We,Xe,Ve,Ye,Ge)}decryptBlock(t,e){const s=t;let i=s[e+1];s[e+1]=s[e+3],s[e+3]=i,this._doCryptBlock(s,e,this._invKeySchedule,Je,Ze,Qe,ts,Fe),i=s[e+1],s[e+1]=s[e+3],s[e+3]=i}_doCryptBlock(t,e,s,i,n,o,r,a){const c=t,l=this._nRounds;let h=c[e]^s[0],d=c[e+1]^s[1],u=c[e+2]^s[2],p=c[e+3]^s[3],y=4;for(let t=1;t<l;t+=1){const t=i[h>>>24]^n[d>>>16&255]^o[u>>>8&255]^r[255&p]^s[y];y+=1;const e=i[d>>>24]^n[u>>>16&255]^o[p>>>8&255]^r[255&h]^s[y];y+=1;const a=i[u>>>24]^n[p>>>16&255]^o[h>>>8&255]^r[255&d]^s[y];y+=1;const c=i[p>>>24]^n[h>>>16&255]^o[d>>>8&255]^r[255&u]^s[y];y+=1,h=t,d=e,u=a,p=c}const f=(a[h>>>24]<<24|a[d>>>16&255]<<16|a[u>>>8&255]<<8|a[255&p])^s[y];y+=1;const g=(a[d>>>24]<<24|a[u>>>16&255]<<16|a[p>>>8&255]<<8|a[255&h])^s[y];y+=1;const m=(a[u>>>24]<<24|a[p>>>16&255]<<16|a[h>>>8&255]<<8|a[255&d])^s[y];y+=1;const v=(a[p>>>24]<<24|a[h>>>16&255]<<16|a[d>>>8&255]<<8|a[255&u])^s[y];y+=1,c[e]=f,c[e+1]=g,c[e+2]=m,c[e+3]=v}}os.keySize=8;const rs=Kt._createHelper(os),as=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],cs=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],ls=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],hs=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],ds=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679];function us(t,e){const s=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=s,this._lBlock^=s<<t}function ps(t,e){const s=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=s,this._rBlock^=s<<t}class ys extends Kt{_doReset(){const t=this._key.words,e=[];for(let s=0;s<56;s+=1){const i=as[s]-1;e[s]=t[i>>>5]>>>31-i%32&1}this._subKeys=[];const s=this._subKeys;for(let t=0;t<16;t+=1){s[t]=[];const i=s[t],n=ls[t];for(let t=0;t<24;t+=1)i[t/6|0]|=e[(cs[t]-1+n)%28]<<31-t%6,i[4+(t/6|0)]|=e[28+(cs[t+24]-1+n)%28]<<31-t%6;i[0]=i[0]<<1|i[0]>>>31;for(let t=1;t<7;t+=1)i[t]>>>=4*(t-1)+3;i[7]=i[7]<<5|i[7]>>>27}this._invSubKeys=[];const i=this._invSubKeys;for(let t=0;t<16;t+=1)i[t]=s[15-t]}encryptBlock(t,e){this._doCryptBlock(t,e,this._subKeys)}decryptBlock(t,e){this._doCryptBlock(t,e,this._invSubKeys)}_doCryptBlock(t,e,s){const i=t;this._lBlock=t[e],this._rBlock=t[e+1],us.call(this,4,252645135),us.call(this,16,65535),ps.call(this,2,858993459),ps.call(this,8,16711935),us.call(this,1,1431655765);for(let t=0;t<16;t+=1){const e=s[t],i=this._lBlock,n=this._rBlock;let o=0;for(let t=0;t<8;t+=1)o|=hs[t][((n^e[t])&ds[t])>>>0];this._lBlock=n,this._rBlock=i^o}const n=this._lBlock;this._lBlock=this._rBlock,this._rBlock=n,us.call(this,1,1431655765),ps.call(this,8,16711935),ps.call(this,2,858993459),us.call(this,16,65535),us.call(this,4,252645135),i[e]=this._lBlock,i[e+1]=this._rBlock}}ys.keySize=2,ys.ivSize=2,ys.blockSize=2;const fs=Kt._createHelper(ys);class gs extends Kt{_doReset(){const t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");const e=t.slice(0,2),s=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=ys.createEncryptor(ut.create(e)),this._des2=ys.createEncryptor(ut.create(s)),this._des3=ys.createEncryptor(ut.create(i))}encryptBlock(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)}decryptBlock(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)}}gs.keySize=6,gs.ivSize=2,gs.blockSize=2;const ms=Kt._createHelper(gs),vs=[],ws=[],_s=[];function ks(){const t=this._X,e=this._C;for(let t=0;t<8;t+=1)ws[t]=e[t];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<ws[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<ws[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<ws[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<ws[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<ws[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<ws[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<ws[6]>>>0?1:0)|0,this._b=e[7]>>>0<ws[7]>>>0?1:0;for(let s=0;s<8;s+=1){const i=t[s]+e[s],n=65535&i,o=i>>>16,r=((n*n>>>17)+n*o>>>15)+o*o,a=((4294901760&i)*i|0)+((65535&i)*i|0);_s[s]=r^a}t[0]=_s[0]+(_s[7]<<16|_s[7]>>>16)+(_s[6]<<16|_s[6]>>>16)|0,t[1]=_s[1]+(_s[0]<<8|_s[0]>>>24)+_s[7]|0,t[2]=_s[2]+(_s[1]<<16|_s[1]>>>16)+(_s[0]<<16|_s[0]>>>16)|0,t[3]=_s[3]+(_s[2]<<8|_s[2]>>>24)+_s[1]|0,t[4]=_s[4]+(_s[3]<<16|_s[3]>>>16)+(_s[2]<<16|_s[2]>>>16)|0,t[5]=_s[5]+(_s[4]<<8|_s[4]>>>24)+_s[3]|0,t[6]=_s[6]+(_s[5]<<16|_s[5]>>>16)+(_s[4]<<16|_s[4]>>>16)|0,t[7]=_s[7]+(_s[6]<<8|_s[6]>>>24)+_s[5]|0}class bs extends Ot{constructor(...t){super(...t),this.blockSize=4,this.ivSize=2}_doReset(){const t=this._key.words,{iv:e}=this.cfg;for(let e=0;e<4;e+=1)t[e]=16711935&(t[e]<<8|t[e]>>>24)|4278255360&(t[e]<<24|t[e]>>>8);this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16];const s=this._X;this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];const i=this._C;this._b=0;for(let t=0;t<4;t+=1)ks.call(this);for(let t=0;t<8;t+=1)i[t]^=s[t+4&7];if(e){const t=e.words,s=t[0],n=t[1],o=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),a=o>>>16|4294901760&r,c=r<<16|65535&o;i[0]^=o,i[1]^=a,i[2]^=r,i[3]^=c,i[4]^=o,i[5]^=a,i[6]^=r,i[7]^=c;for(let t=0;t<4;t+=1)ks.call(this)}}_doProcessBlock(t,e){const s=t,i=this._X;ks.call(this),vs[0]=i[0]^i[5]>>>16^i[3]<<16,vs[1]=i[2]^i[7]>>>16^i[5]<<16,vs[2]=i[4]^i[1]>>>16^i[7]<<16,vs[3]=i[6]^i[3]>>>16^i[1]<<16;for(let t=0;t<4;t+=1)vs[t]=16711935&(vs[t]<<8|vs[t]>>>24)|4278255360&(vs[t]<<24|vs[t]>>>8),s[e+t]^=vs[t]}}const $s=Ot._createHelper(bs),Ss=[],Es=[],As=[];function Cs(){const t=this._X,e=this._C;for(let t=0;t<8;t+=1)Es[t]=e[t];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<Es[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<Es[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<Es[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<Es[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<Es[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<Es[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<Es[6]>>>0?1:0)|0,this._b=e[7]>>>0<Es[7]>>>0?1:0;for(let s=0;s<8;s+=1){const i=t[s]+e[s],n=65535&i,o=i>>>16,r=((n*n>>>17)+n*o>>>15)+o*o,a=((4294901760&i)*i|0)+((65535&i)*i|0);As[s]=r^a}t[0]=As[0]+(As[7]<<16|As[7]>>>16)+(As[6]<<16|As[6]>>>16)|0,t[1]=As[1]+(As[0]<<8|As[0]>>>24)+As[7]|0,t[2]=As[2]+(As[1]<<16|As[1]>>>16)+(As[0]<<16|As[0]>>>16)|0,t[3]=As[3]+(As[2]<<8|As[2]>>>24)+As[1]|0,t[4]=As[4]+(As[3]<<16|As[3]>>>16)+(As[2]<<16|As[2]>>>16)|0,t[5]=As[5]+(As[4]<<8|As[4]>>>24)+As[3]|0,t[6]=As[6]+(As[5]<<16|As[5]>>>16)+(As[4]<<16|As[4]>>>16)|0,t[7]=As[7]+(As[6]<<8|As[6]>>>24)+As[5]|0}class xs extends Ot{constructor(...t){super(...t),this.blockSize=4,this.ivSize=2}_doReset(){const t=this._key.words,{iv:e}=this.cfg;this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16];const s=this._X;this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];const i=this._C;this._b=0;for(let t=0;t<4;t+=1)Cs.call(this);for(let t=0;t<8;t+=1)i[t]^=s[t+4&7];if(e){const t=e.words,s=t[0],n=t[1],o=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),a=o>>>16|4294901760&r,c=r<<16|65535&o;i[0]^=o,i[1]^=a,i[2]^=r,i[3]^=c,i[4]^=o,i[5]^=a,i[6]^=r,i[7]^=c;for(let t=0;t<4;t+=1)Cs.call(this)}}_doProcessBlock(t,e){const s=t,i=this._X;Cs.call(this),Ss[0]=i[0]^i[5]>>>16^i[3]<<16,Ss[1]=i[2]^i[7]>>>16^i[5]<<16,Ss[2]=i[4]^i[1]>>>16^i[7]<<16,Ss[3]=i[6]^i[3]>>>16^i[1]<<16;for(let t=0;t<4;t+=1)Ss[t]=16711935&(Ss[t]<<8|Ss[t]>>>24)|4278255360&(Ss[t]<<24|Ss[t]>>>8),s[e+t]^=Ss[t]}}const Ms=Ot._createHelper(xs);function Bs(){const t=this._S;let e=this._i,s=this._j,i=0;for(let n=0;n<4;n+=1){e=(e+1)%256,s=(s+t[e])%256;const o=t[e];t[e]=t[s],t[s]=o,i|=t[(t[e]+t[s])%256]<<24-8*n}return this._i=e,this._j=s,i}class Ds extends Ot{_doReset(){const t=this._key,e=t.words,s=t.sigBytes;this._S=[];const i=this._S;for(let t=0;t<256;t+=1)i[t]=t;for(let t=0,n=0;t<256;t+=1){const o=t%s,r=e[o>>>2]>>>24-o%4*8&255;n=(n+i[t]+r)%256;const a=i[t];i[t]=i[n],i[n]=a}this._j=0,this._i=this._j}_doProcessBlock(t,e){t[e]^=Bs.call(this)}}Ds.keySize=8,Ds.ivSize=0;const Ts=Ot._createHelper(Ds);class Os extends Ds{constructor(...t){super(...t),Object.assign(this.cfg,{drop:192})}_doReset(){super._doReset.call(this);for(let t=this.cfg.drop;t>0;t-=1)Bs.call(this)}}const Is=Ot._createHelper(Os);function Hs(t,e,s,i){const n=t;let o;const r=this._iv;r?(o=r.slice(0),this._iv=void 0):o=this._prevBlock,i.encryptBlock(o,0);for(let t=0;t<s;t+=1)n[e+t]^=o[t]}class Ps extends It{}Ps.Encryptor=class extends Ps{processBlock(t,e){const s=this._cipher,{blockSize:i}=s;Hs.call(this,t,e,i,s),this._prevBlock=t.slice(e,e+i)}},Ps.Decryptor=class extends Ps{processBlock(t,e){const s=this._cipher,{blockSize:i}=s,n=t.slice(e,e+i);Hs.call(this,t,e,i,s),this._prevBlock=n}};class Us extends It{}Us.Encryptor=class extends Us{processBlock(t,e){const s=t,i=this._cipher,{blockSize:n}=i,o=this._iv;let r=this._counter;o&&(this._counter=o.slice(0),r=this._counter,this._iv=void 0);const a=r.slice(0);i.encryptBlock(a,0),r[n-1]=r[n-1]+1|0;for(let t=0;t<n;t+=1)s[e+t]^=a[t]}},Us.Decryptor=Us.Encryptor;const Ks=t=>{let e=t;if(255==(t>>24&255)){let s=t>>16&255,i=t>>8&255,n=255&t;255===s?(s=0,255===i?(i=0,255===n?n=0:n+=1):i+=1):s+=1,e=0,e+=s<<16,e+=i<<8,e+=n}else e+=1<<24;return e};
/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */
class Ls extends It{}Ls.Encryptor=class extends Ls{processBlock(t,e){const s=t,i=this._cipher,{blockSize:n}=i,o=this._iv;let r=this._counter;o&&(this._counter=o.slice(0),r=this._counter,this._iv=void 0),(t=>{const e=t;e[0]=Ks(e[0]),0===e[0]&&(e[1]=Ks(e[1]))})(r);const a=r.slice(0);i.encryptBlock(a,0);for(let t=0;t<n;t+=1)s[e+t]^=a[t]}},Ls.Decryptor=Ls.Encryptor;class Ns extends It{}Ns.Encryptor=class extends Ns{processBlock(t,e){this._cipher.encryptBlock(t,e)}},Ns.Decryptor=class extends Ns{processBlock(t,e){this._cipher.decryptBlock(t,e)}};class Rs extends It{}Rs.Encryptor=class extends Rs{processBlock(t,e){const s=t,i=this._cipher,{blockSize:n}=i,o=this._iv;let r=this._keystream;o&&(this._keystream=o.slice(0),r=this._keystream,this._iv=void 0),i.encryptBlock(r,0);for(let t=0;t<n;t+=1)s[e+t]^=r[t]}},Rs.Decryptor=Rs.Encryptor;const zs={pad(t,e){const s=4*e,i=s-t.sigBytes%s;t.concat(ut.random(i-1)).concat(ut.create([i<<24],1))},unpad(t){const e=t,s=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=s}},js={pad(t,e){const s=t,i=4*e;s.clamp(),s.sigBytes+=i-(t.sigBytes%i||i)},unpad(t){const e=t,s=e.words;for(let t=e.sigBytes-1;t>=0;t-=1)if(s[t>>>2]>>>24-t%4*8&255){e.sigBytes=t+1;break}}},qs={pad(t,e){t.concat(ut.create([2147483648],1)),js.pad(t,e)},unpad(t){const e=t;js.unpad(e),e.sigBytes-=1}},Gs={stringify:t=>t.ciphertext.toString(pt),parse(t){const e=pt.parse(t);return Lt.create({ciphertext:e})}};var Fs={lib:{Base:dt,WordArray:ut,BufferedBlockAlgorithm:gt,Hasher:mt,Cipher:Tt,StreamCipher:Ot,BlockCipherMode:It,BlockCipher:Kt,CipherParams:Lt,SerializableCipher:Rt,PasswordBasedCipher:jt},x64:{Word:_t,WordArray:kt},enc:{Hex:pt,Latin1:yt,Utf8:ft,Utf16:Ft,Utf16BE:Gt,Utf16LE:Wt,Base64:bt},algo:{HMAC:vt,MD5:xt,SHA1:Vt,SHA224:ce,SHA256:oe,SHA384:ge,SHA512:pe,SHA3:Ae,RIPEMD160:Re,PBKDF2:qe,EvpKDF:Dt,AES:os,DES:ys,TripleDES:gs,Rabbit:bs,RabbitLegacy:xs,RC4:Ds,RC4Drop:Os},mode:{CBC:Pt,CFB:Ps,CTR:Us,CTRGladman:Ls,ECB:Ns,OFB:Rs},pad:{Pkcs7:Ut,AnsiX923:{pad(t,e){const s=t,i=s.sigBytes,n=4*e,o=n-i%n,r=i+o-1;s.clamp(),s.words[r>>>2]|=o<<24-r%4*8,s.sigBytes+=o},unpad(t){const e=t,s=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=s}},Iso10126:zs,Iso97971:qs,NoPadding:{pad(){},unpad(){}},ZeroPadding:js},format:{OpenSSL:Nt,Hex:Gs},kdf:{OpenSSL:zt},MD5:Mt,HmacMD5:Bt,SHA1:Yt,HmacSHA1:Jt,SHA224:le,HmacSHA224:he,SHA256:re,HmacSHA256:ae,SHA384:me,HmacSHA384:ve,SHA512:ye,HmacSHA512:fe,SHA3:Ce,HmacSHA3:xe,RIPEMD160:ze,HmacRIPEMD160:je,PBKDF2:(t,e,s)=>qe.create(s).compute(t,e),EvpKDF:(t,e,s)=>Dt.create(s).compute(t,e),AES:rs,DES:fs,TripleDES:ms,Rabbit:$s,RabbitLegacy:Ms,RC4:Ts,RC4Drop:Is};customElements.define("invite-modal-window",class extends Q{static properties={url:{type:String},ME:{type:Object}};constructor(){super(),this.ME=ht,this.isGenerated=!1}createRenderRoot(){return this}#a(t,e){const s=new URL(window.location.href),i=Fs.AES.encrypt(e,"392e32oijsdfweoir").toString();return`${s.origin}?${t}=${encodeURIComponent(i)}`}open(){const t=new CustomEvent("inviteGenerated",{bubbles:!1,detail:{type:"join",sentInviteLink:!0}});return super.open(),this.querySelector(".qr").innerHTML="",new QRCode(this.querySelector(".qr"),{text:this.url}),ct.app.dispatchEvent(t)}render(){const t=this.#a("join",this.ME.id),e=D`<p>${nt(lt.INVITELINK.replaceAll("{{link}}",this.url))}</p><br><div class="qr"></div><br>`;return this.url=t,super.render(e)}});const Ws=["Aquatic","Aesthetical","Ageless","Authentic","Afraid","Athletic","Academic","Adventurous","Aromatic","Advantageous","Bad","Bald","Beautiful","Bitter","Barking","Baffling","Bankrupt","Busy","Burning","Boring","Bold","Charming","Cheerful","Clean","Curly","Curious","Caring","Crazy","Cute","Careful","Classy","Cheap","Clingy","Classic","Chunky","Cuddly","Clumsy","Cold","Cozy","Creamy","Cosmetic","Cryptic","Cynical","Damaged","Dandy","Dazzling","Dark","Deadly","Dangerous","Decent","Deep","Dirty","Dramatic","Dull","Delightful","Delicious","Discreet","Dizzy","Disrespectful","Eager","Early","Elegant","Energetic","Easy","Euphoric","Exotic","Economic","Eccentric","Efficient","Educated","Elderly","Egotistical","Elite","Empty","Eternal","Enthusiastic","Enormous","Expensive","Exuberant","Eye-Popping","Fancy","Fantastic","Fierce","Foolish","Funny","Fascinating","Fatal","Flawless","Foolish","Fat","Fictional","Flat","Flying","French","Fuzzy","Furious","Frozen","Fruity","Generic","Gentle","Gifted","Glamorous","Gleaming","Glorious","Gorgeous","Grateful","Gross","Grim","Grimy","Giant","Goofy","Gooey","Great","Giggly","Giving","Gigantic","Gruesome","Great","Groovy","Hairy","Handsome","Happy","Harsh","Hateful","Haunting","Hairless","Hard","Heartless","Heavy","Hip","Hollow","Helpless","Horrible","Hot","Huge","Humble","Hungry","Humble","Hypnotic","Hypersensitive","Hysterical","Hyperactive","Helpful","Honest","Hurtful","Icy","Idiotic","Immature","Impolite","Impressive","Incredible","Innocent","Immortal","Imaginary","Imaginative","Indirect","Insane","Insignificant","Intense","Intimidating","Interesting","Irritating","Isolated","Italian","Irresistible","Irrelevant"],Xs=["Alligator","Alpaca","Anaconda","Ape","Axolotl","Albatross","Ant","Antelope","Barracuda","Bumblebee","Buffalo","Baboon","Bird","Bee","Butterfly","Cat","Chameleon","Cockatoo","Cheetah","Chicken","Coyote","Cow","Crab","Duck","Dalmatian","Dolphin","Dog","Dingo","Dachshund","Dodo","Deer","Dragonfish","Eagle","Elephant","Emu","Elk","Earthworm","Eel","Echidna","Frog","Flamingo","Falcon","Firefly","Fox","Fish","Ferret","Giraffe","Gorilla","Gnu","Gazelle","Goldfish","Gopher","Gecko","Gnat","Gibbon","Goat","Goose","Grasshoper","Grouse","Guppy","Hamster","Hornbill","Hedgehog","Hippo","Horse","Honeybee","Husky","Hyena","Hummingbird","Iguana","Impala"],Vs=Object.freeze({fadeLeftOut:function(){return"animation: fadeLeftOutAnimation 0.3s !important;"},fadeLeftIn:function(){return"animation: fadeLeftInAnimation 0.3s !important;"},fadeRightOut:function(){return"animation: fadeRightOutAnimation 0.3s !important;"},fadeRightIn:function(){return"animation: fadeRightInAnimation 0.3s !important;"}});function Ys(t){const e=t.which?t.which:t.keyCode;return 0===t.target.selectionStart&&35===e||!(e>31&&(e<48||e>57))}function Js(t){const e=new Date(t);return`${e.toDateString()} ${e.toLocaleTimeString()}`}function Zs(t,e,s){e.style=Vs.fadeRightOut(),setTimeout((()=>{e.classList.add("hide"),t.classList.remove("hide"),e.style="",t.style=Vs.fadeLeftIn(),requestAnimationFrame((()=>{s?.focus(),t.style=""}))}),300)}function Qs(t,e,s){t.style=Vs.fadeLeftOut(),setTimeout((()=>{t.classList.add("hide"),e.classList.remove("hide"),t.style="",e.style=Vs.fadeRightIn(),requestAnimationFrame((()=>{s?.focus(),e.style=""}))}),300)}function ti(){const t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!?";return[...new Array(32)].map((function(){return t[(e=0,s=t.length-1,Math.floor(Math.random()*(s-e+1)+e))];var e,s})).join("")}function ei(){const t=ti(),e=Date.now()+"",s=Fs.AES.encrypt(t,e).toString();return Object.freeze({password:s,salt:e})}customElements.define("panic-modal-window",class extends Q{static properties={ME:{type:Object}};constructor(){super(),this.ME=ht}createRenderRoot(){return this}onKeyPress(t){return Ys(t)?"Enter"===t.key?this.onClickDestroy():void 0:(t.preventDefault(),t.stopPropagation(),!1)}onClickDestroy(){if(this.querySelector("input").value.trim()===this.ME.id){const t=new CustomEvent("panic",{bubbles:!1,detail:{...this.ME,done:async()=>(await be8.panic(),location.reload())}});return ct.app.dispatchEvent(t)}return ct.toast.notification={type:"error",text:"Wrong code"},ct.toast.open()}open(){super.open(),requestAnimationFrame((()=>this.querySelector("input").focus()))}render(){const t=nt(lt.PANICTEXT.replaceAll("{{id}}",this.ME.id)),e=D`<p>${t}</p><div><input tabindex="0" @keydown="${t=>this.onKeyPress(t)}" type="text"></div><button @click="${this.onClickDestroy}" class="danger">destroy everything</button>`;return super.render(e)}});function si(){ct.toast.notification={type:"success",text:"Your unlock code and destroy code are set. Auto refresh in 2s."},ct.toast.open(),setTimeout((()=>location.reload()),1750)}customElements.define("conversation-modal-window",class extends Q{static properties={ME:{}};#c={};#l={};#h={};#d={};#u={};constructor(){super(),this.ME={}}createRenderRoot(){return this}open(){super.open(),requestAnimationFrame((()=>this.#h.focus()))}clickOnGoToGroup(){Qs(this.#c,this.#l,this.#h)}clickOnBackToMain(){Zs(this.#c,this.#l,this.#d)}#p(t,e){const s=new CustomEvent("createGroup",{bubbles:!1,detail:{...this.ME,name:t,type:e,success:()=>(ct.toast.notification={type:"success",text:"You created the group "+t},this.#d.value="",ct.toast.open(),this.close())}});return ct.app.dispatchEvent(s)}clickOnCreateGroup(){const t=this.#d.value.trim(),e=this.#u.value;return 0===t.length?(ct.toast.notification={type:"error",text:"Enter a valid name for your group"},ct.toast.open()):this.#p(t,e)}close(){super.close(),this.clickOnBackToMain()}#y(t){const e=new CustomEvent("startConversation",{bubbles:!1,detail:{...this.ME,receiverID:t,success:()=>(ct.toast.notification={type:"success",text:"Your are now chatting with "+t},this.#h.value="",ct.toast.open(),this.close()),idDoesNotExist:()=>{ct.toast.notification={type:"error",text:"This id does not exist or banned you "+t},ct.toast.open()}}});return ct.app.dispatchEvent(e)}keyDownOn1to1(t){if(!Ys(t))return t.preventDefault(),t.stopPropagation(),!1;if(13===t.keyCode){const t=this.#h.value.trim();return 0===t.length?(ct.toast.notification={type:"error",text:"Enter a be8 id"},ct.toast.open()):t===this.ME.id?(ct.toast.notification={type:"error",text:"You can not chat with yourself."},ct.toast.open()):this.#y(t)}}firstUpdated(){this.#c=this.querySelector(".modal-content"),this.#l=this.querySelector(".create-group-content"),this.#h=this.#c.querySelector("input"),this.#d=this.#l.querySelector("input"),this.#u=this.#l.querySelector("select")}render(){const t=D`<p>${lt.CONVERSATION}</p><input @keydown="${t=>this.keyDownOn1to1(t)}" tabindex="0" type="text"><div @click="${this.clickOnGoToGroup}" class="sub-modal-button hover-background">Create a group <i class="fa-solid fa-arrow-right float-right"></i></div>`,e=D`<div><p>Name</p><input type="text" maxlength="20"></div><p>Type</p><select><option value="public">public</option><option value="private">private</option></select><button @click="${this.clickOnCreateGroup}">create group</button>`,s=D`<div class="create-group-content hide"><p class="create-group-headline"><i @click="${this.clickOnBackToMain}" class="fa-solid fa-arrow-left hover-font float-left"></i> <span>Create a group</span></p>${e}</div>`;return super.render(t,s)}});customElements.define("codes-modal-window",class extends Q{static properties={ME:{type:Object},state:{type:String}};#c={};#f={};#g={};constructor(){super(),this.ME=ht}clickOnUpdateUnlock(){const[t,e,s]=[...this.#f.querySelectorAll("input")],i=e.value,n=s.value,o=t.value,r=new CustomEvent("updateCode",{bubbles:!1,detail:{...this.ME,code:i,oldCode:o,codeType:"unlock",done:()=>(si(),this.close()),oldCodeWrong:()=>(ct.toast.notification={type:"error",text:"Your old code is wrong."},ct.toast.open())}});return i!==n?(ct.toast.notification={type:"error",text:"Your new code and your re-typed are not identical."},ct.toast.open()):ct.app.dispatchEvent(r)}clickOnUpdateDestroy(){const[t,e,s]=[...this.#g.querySelectorAll("input")],i=e.value,n=s.value,o=t.value,r=new CustomEvent("updateCode",{bubbles:!1,detail:{...this.ME,code:i,oldCode:o,codeType:"destroy",done:()=>(si(),this.close()),oldCodeWrong:()=>(ct.toast.notification={type:"error",text:"Your old code is wrong."},ct.toast.open())}});return i!==n?(ct.toast.notification={type:"error",text:"Your new code and your re-typed are not identical."},ct.toast.open()):ct.app.dispatchEvent(r)}goToUpdateUnlock(){const t=this.#f.querySelector("input");this.state="unlock",Qs(this.#c,this.#f,t)}goToUpdateDestroy(){const t=this.#f.querySelector("input");this.state="destroy",Qs(this.#c,this.#g,t)}backToUpdateSelect(){"unlock"===this.state&&Zs(this.#c,this.#f),"destroy"===this.state&&Zs(this.#c,this.#g),this.state="main"}open(){super.open(),this.state="main",requestAnimationFrame((()=>this.querySelector("input")?.focus())),this.#f=this.querySelector(".unlock-side"),this.#g=this.querySelector(".destroy-side")}close(){super.close(),this.backToUpdateSelect()}setup(){const t=[...this.querySelectorAll("input")],[e,s,i,n]=t,o=e.value,r=s.value,a=i.value,c=n.value,l=o===r,h=a===c,d=new CustomEvent("setupCodes",{bubbles:!1,detail:{...this.ME,unlockCode:o,destroyCode:a,done:()=>{si(),t.forEach((t=>t.value="")),this.close()}}});return l?h?o===a?(ct.toast.notification={type:"error",text:"Destroy and unlock are the same code"},ct.toast.open()):0===o.length||0===r.length?(ct.toast.notification={type:"error",text:"You have to enter an unlock code"},ct.toast.open()):0===a.length||0===c.length?(ct.toast.notification={type:"error",text:"You have to enter a destroy code"},ct.toast.open()):ct.app.dispatchEvent(d):(ct.toast.notification={type:"error",text:"Destroy and destroy re-type are not equal"},ct.toast.open()):(ct.toast.notification={type:"error",text:"Unlock and unlock re-type are not equal"},ct.toast.open())}onKeyPress(t){if("Enter"===t.key)return this.setup()}renderUpdateSide(){const t=D`<div class="unlock-side hide"><p class="create-group-headline"><i @click="${this.backToUpdateSelect}" class="fa-solid fa-arrow-left hover-font float-left"></i> <span>Update Unlock</span></p><small>Old Code</small><input autocomplete="off" type="password" maxlength="40"><small>New Code</small><input type="password" maxlength="40"> <small>New Code re-type</small><input type="password" maxlength="40"><button @click="${this.clickOnUpdateUnlock}" class="full-width">Update</button></div>`,e=D`<div class="destroy-side hide"><p class="create-group-headline"><i @click="${this.backToUpdateSelect}" class="fa-solid fa-arrow-left hover-font float-left"></i> <span>Update Destroy</span></p><small>Old Code</small><input autocomplete="off" type="password" maxlength="40"><small>New Code</small><input type="password" maxlength="40"> <small>New Code re-type</small><input type="password" maxlength="40"><button @click="${this.clickOnUpdateDestroy}" class="full-width">Update</button></div>`;return D`${t}${e}`}renderUpdate(){const t=D`<p @click="${this.goToUpdateUnlock}" class="sub-modal-button hover-background"><span>Unlock Code</span> <i class="fa-solid fa-arrow-right hover-font float-right"></i></p>`,e=D`<p @click="${this.goToUpdateDestroy}" class="sub-modal-button hover-background"><span>Destroy Code</span> <i class="fa-solid fa-arrow-right hover-font float-right"></i></p>`;return D`<p class="create-group-headline">Update</p>${t}${e}`}renderSetup(){const t=D`<div class="setup-unlock-container"><p class="create-group-headline">Setup</p><small>${lt.UNLOCKSETUPTEXT}</small></div>`,e=D`<form class="setup-unlock-container"><p>Unlock Code</p><small>new password</small><input type="password" autocomplete="off" maxlength="40"><small>re-type</small><input type="password" autocomplete="off" maxlength="40"></form>`,s=D`<form><p>Destroy Code</p><small>new destory code</small><input type="password" autocomplete="off" maxlength="40"><small>re-type</small><input type="password" autocomplete="off" maxlength="40" @keydown="${t=>this.onKeyPress(t)}"></form>`;return D`${t}${e}${s}<button @click="${this.setup}" class="full-width">Setup</button>`}firstUpdated(){this.#c=this.querySelector(".modal-content")}render(){const t=this.ME.codes?this.renderUpdate():this.renderSetup(),e=this.ME.codes?this.renderUpdateSide():"";return super.render(t,e)}});customElements.define("lock-modal-window",class extends Q{static properties={ME:{type:Object}};#m=function(){};#v={};constructor(){super(!1),this.ME={}}createRenderRoot(){return this}enterUnlockCode(t){if(13===t.keyCode){const t=new CustomEvent("unlock",{detail:{code:this.#v.value,done:()=>(ct.toast.notification={type:"success",text:"be8 unlocked"},ct.toast.open(),this.#m(),this.close()),error:()=>(ct.toast.notification={type:"error",text:"wrong unlock code"},ct.toast.open())}});return ct.app.dispatchEvent(t)}}open(t=function(){}){return this.ME.codes?(this.#m=t,super.open(),requestAnimationFrame((()=>this.#v.focus())),!0):(t(),!1)}firstUpdated(){this.#v=this.querySelector("input")}render(){const t=D`<p class="create-group-headline">Unlock be8</p><small>Enter your unlock code to use be8</small><input type="password" autocomplete="off" @keydown="${t=>this.enterUnlockCode(t)}" maxlength="40">`;return super.render(t)}});customElements.define("user-modal-window",class extends Q{static properties={conversationPartner:{type:Object}};constructor(){super(),this.conversationPartner=lt}#w(){const t=Js(this.conversationPartner.expire),e=D`<i class="fa-solid fa-${at[this.conversationPartner.type]}"></i>`,s=D`<p class="create-group-headline">${e} ${this.conversationPartner.nickname}</p>`,i=D`<p><span>ID:</span> <span>${this.conversationPartner.id}</span></p>`,n=D`<p><span>Nickname:</span> <span>${this.conversationPartner.nickname}</span></p>`,o=D`<p><span>Status:</span> <span>"${this.conversationPartner.status}"</span></p>`,r=this.conversationPartner.endless?"":D`<p><span>Valid Account:</span> <span>${t}</span></p>`,a=this.conversationPartner.endless?D`<i class="fa-solid fa-check danger-color"></i>`:D`<i class="fa-solid fa-times"></i>`,c=D`<p><span>Endless until: </span>${a}</p>`;return D`${s}${i}${n}${o}${r}${c}`}#_(){const t=D`<i class="fa-solid fa-${at[this.conversationPartner.type]}"></i>`,e=D`<p class="create-group-headline">${t} ${this.conversationPartner.nickname}</p>`;return D`${e}<p>This is a system user you can't send messages to the system user.</p>`}render(){const t="system"===this.conversationPartner.type?this.#_():this.#w();return super.render(t)}});
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const{H:ii}=W,ni=()=>document.createComment(""),oi=(t,e,s)=>{var i;const n=t._$AA.parentNode,o=void 0===e?t._$AB:e._$AA;if(void 0===s){const e=n.insertBefore(ni(),o),i=n.insertBefore(ni(),o);s=new ii(e,i,t,t.options)}else{const e=s._$AB.nextSibling,r=s._$AM,a=r!==t;if(a){let e;null===(i=s._$AQ)||void 0===i||i.call(s,t),s._$AM=t,void 0!==s._$AP&&(e=t._$AU)!==r._$AU&&s._$AP(e)}if(e!==o||a){let t=s._$AA;for(;t!==e;){const e=t.nextSibling;n.insertBefore(t,o),t=e}}}return s},ri=(t,e,s=t)=>(t._$AI(e,s),t),ai={},ci=t=>{var e;null===(e=t._$AP)||void 0===e||e.call(t,!1,!0);let s=t._$AA;const i=t._$AB.nextSibling;for(;s!==i;){const t=s.nextSibling;s.remove(),s=t}},li=(t,e,s)=>{const i=new Map;for(let n=e;n<=s;n++)i.set(t[n],n);return i},hi=et(class extends st{constructor(t){if(super(t),t.type!==tt)throw Error("repeat() can only be used in text expressions")}dt(t,e,s){let i;void 0===s?s=e:void 0!==e&&(i=e);const n=[],o=[];let r=0;for(const e of t)n[r]=i?i(e,r):r,o[r]=s(e,r),r++;return{values:o,keys:n}}render(t,e,s){return this.dt(t,e,s).values}update(t,[e,s,i]){var n;const o=(t=>t._$AH)(t),{values:r,keys:a}=this.dt(e,s,i);if(!Array.isArray(o))return this.ut=a,r;const c=null!==(n=this.ut)&&void 0!==n?n:this.ut=[],l=[];let h,d,u=0,p=o.length-1,y=0,f=r.length-1;for(;u<=p&&y<=f;)if(null===o[u])u++;else if(null===o[p])p--;else if(c[u]===a[y])l[y]=ri(o[u],r[y]),u++,y++;else if(c[p]===a[f])l[f]=ri(o[p],r[f]),p--,f--;else if(c[u]===a[f])l[f]=ri(o[u],r[f]),oi(t,l[f+1],o[u]),u++,f--;else if(c[p]===a[y])l[y]=ri(o[p],r[y]),oi(t,o[u],o[p]),p--,y++;else if(void 0===h&&(h=li(a,y,f),d=li(c,u,p)),h.has(c[u]))if(h.has(c[p])){const e=d.get(a[y]),s=void 0!==e?o[e]:null;if(null===s){const e=oi(t,o[u]);ri(e,r[y]),l[y]=e}else l[y]=ri(s,r[y]),oi(t,o[u],s),o[e]=null;y++}else ci(o[p]),p--;else ci(o[u]),u++;for(;y<=f;){const e=oi(t,l[f+1]);ri(e,r[y]),l[y++]=e}for(;u<=p;){const t=o[u++];null!==t&&ci(t)}return this.ut=a,((t,e=ai)=>{t._$AH=e})(t,l),T}});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var di=Object.freeze({WELCOME:'Welcome to Be8, your nickname is <i class="highlight-color">{{nickname}}</i>. Be8 is the first ever real privacy messenger. Everything is End-to-End encrypted, only your device knows your key! Everything gets deleted after 30 days even your account, but you can create as much accounts as you want. Your id is <i class="highlight-color">#{{id}}</i>. You can find your expire date on the top left. Have fun.',STARTCONVERSATION:'Start conversation with <i class="highlight-color">#{{conversationID}}</i>'});customElements.define("messages-menu",class extends J{static properties={conversationPartner:{type:Object},messages:{type:Array},ME:{type:Object}};#k={};#b={};#$={};constructor(){super(),this.conversationPartner={},this.messages=[]}createRenderRoot(){return this}clickOnBack(){ct.navi.classList.remove("hide"),ct.menus.messagesMenu.classList.add("hide"),ct.header.classList.remove("hide"),ct.bottomNavi.classList.remove("hide"),ct.bottomNavi.querySelector("div").classList.add("active-setting")}clickOnUser(){this.#k.conversationPartner=this.conversationPartner,this.#k.open()}setActive({type:t}){const e="system"===t;this.#S(),this.setInput(),e?(this.#$.classList.contains("disabled")||(this.#$.classList.add("disabled"),this.#$.classList.add("hover-font")),this.#b.disabled=!0):(this.#$.classList.contains("disabled")&&(this.#$.classList.remove("disabled"),this.#$.classList.remove("hover-font")),this.#b.disabled=!1)}setInput(t=""){return this.#b.value=t}#S(){return this.#b.focus()}firstUpdated(){this.#b=this.querySelector(".write-message-input"),this.#k=document.querySelector("user-modal-window"),this.#$=document.querySelector(".fa-photo-film")}writeMessage(t){if(13===t.keyCode){const t=this.#b.value.trim(),e=new CustomEvent("writeMessage",{bubbles:!1,detail:{message:t,...this.ME}});return this.#b.value="",ct.app.dispatchEvent(e)}}uploadMedia(){const t=new CustomEvent("uploadMedia",{bubbles:!1,detail:{...this.ME}});return ct.app.dispatchEvent(t)}scrollToBottom(){requestAnimationFrame((()=>{const t=this.querySelector(".messages");t.scrollTop=t.scrollHeight}))}renderWriteContainer(){return D`<div class="write-container"><input @keydown="${this.writeMessage}" class="write-message-input" type="text" maxlength="1000"><div><i @click="${this.uploadMedia}" class="fa-solid fa-photo-film hover-font"></i></div></div>`}renderConversationPartner(){const t=this.conversationPartner.endless?D`<i class="fa-solid fa-check"></i>`:"",e=D`<i class="fa-solid fa-${at[this.conversationPartner.type]}"></i>`,s="system"!==this.conversationPartner.type?D`#${this.conversationPartner.id}`:"",i=D`<p @click="${this.clickOnUser}" class="hover-font">${e} ${this.conversationPartner.nickname} ${s}</p>`,n=D`<i @click="${this.clickOnBack}" class="fa-solid fa-arrow-left ${ot?"":"shrinkToZero"}"></i>`,o=D`<div class="conversation-partner-user">${i}${t}</div>`;return D`<div class="conversation-partner">${n}${o}</div>`}#E({text:t,type:e,contentID:s,ts:i},n){if("imageMessage"===e)return D`<img data-contentid="${s}" src="">`;if(n){const e=di[t].replace("{{ts}}",Js(i)).replace("{{id}}",this.ME.id).replace("{{nickname}}",this.ME.nickname).replace("{{conversationID}}",this.conversationPartner.sender);return D`<p>${nt(e)}</p>`}return D`<p>${t}</p>`}#A(t,e,s){return t?s||1!==e.length?D`<i class="fa-solid fa-check"></i>`:D`<i class="fa-solid fa-check"></i><i class="fa-solid fa-check"></i>`:""}render(){const t="group"===this.conversationPartner.type,e=hi(this.messages,(t=>t.messageID),(e=>{const{messageID:s,nickname:i,sender:n,status:o,ts:r,type:a}=e,c="system"===a,l=new Date(r),h=n===this.ME.id,d=l.toLocaleTimeString(),u=D``,p=this.#E(e,c),y=this.#A(h,o,t),f=D`<p><small class="float-right unselectable">${d}${y}</small></p>`;return D`<div alt="${i}" data-messageid="${s}" class="message-container${c?" system-message":""}"><div class="message ${h?"sent-message":"received-message"}">${u}${p}${f}</div></div>`})),s=D`<div class="messages">${e}</div>`;return D`${this.renderConversationPartner()}${s}${this.renderWriteContainer()}`}});customElements.define("user-menu",class extends J{static properties={ME:{type:Object}};#C={};#x={};constructor(){super(),this.ME=ht}createRenderRoot(){return this}clickOnEndlessToken(){const t=this.#x.value.trim(),e=new CustomEvent("setToken",{bubbles:!1,detail:{...this.ME,token:t,wrongToken:()=>(ct.toast.notification={type:"error",text:"Your token is invalid"},ct.toast.open()),tokenInUse:()=>(ct.toast.notification={type:"error",text:"This token is already in use"},ct.toast.open()),success:({tokenType:t,validTime:e})=>{const s="endless"===t?t:e/1e3/60/60/24+" days";ct.toast.notification={type:"success",text:`Your acc is upgraded to ${s}`},this.#x.value="",ct.toast.open()}}});return t.length<32?(ct.toast.notification={type:"error",text:"Your token is too short"},ct.toast.open()):ct.app.dispatchEvent(e)}#M(t){const e=new CustomEvent("setStatus",{bubbles:!1,detail:{status:t}});return ct.app.dispatchEvent(e)}keyDownStatus(t){clearTimeout(this.#C),this.#C=setTimeout((()=>{const e=t.target.value.trim();if(this.ME.status===e)return clearTimeout(this.#C);this.ME={...this.ME,status:e},this.#M(e)}),400)}firstUpdated(){this.#x=this.querySelector("input")}render(){const t=Js(this.ME.expire),e=this.ME.endless?D`<i class="fa-solid fa-check danger-color"></i>`:D`<i class="fa-solid fa-times"></i>`,s=this.ME.endless?"":D`<p>Valid until: <i>${t}</i></p>`,i=D`<div class="settings-container"><p>ID: <i>#${this.ME.id}</i></p><p>Nickname: <i>${this.ME.nickname}</i></p>${s}<p>Endless Account: ${e}</p></div>`,n=D`<div class="settings-container"><p>Status</p><textarea @keydown="${t=>this.keyDownStatus(t)}" maxlength="280">${this.ME.status}</textarea></div>`,o=this.ME.endless?"":D`<div class="settings-container"><p>Token</p><input type="text" maxlength="${32}"><button @click="${this.clickOnEndlessToken}">Check</button></div>`;return D`<h1>User Menu</h1>${i}${n}${o}`}});customElements.define("settings-menu",class extends J{static properties={ME:{type:Object}};#B={};#D=document.querySelector("codes-modal-window");constructor(){super(),this.ME=ht}createRenderRoot(){return this}clickOnNotifications(){console.log("Notifications")}clickOnCodes(){return this.#D.open()}#T(t,e){const s=new CustomEvent("changeNickName",{bubbles:!1,detail:{oldNickname:e,newNickname:t}});return ct.app.dispatchEvent(s)}changeName(t){clearTimeout(this.#B),this.#B=setTimeout((()=>{const e=t.target.value,s=this.ME.nickname;this.ME={...this.ME,nickname:e},this.#T(e,s)}),900)}render(){const t=D`<div class="settings-container"><p>Nickname is ${this.ME.nickname}</p><input @input="${this.changeName}" type="text" value="${this.ME.nickname}" maxlength="20"></div>`,e=D`<div class="settings-container"><p>Destroy and Unlock</p><button @click="${this.clickOnCodes}" class="danger">${this.ME.codes?"Update":"Setup"}</button></div>`,s=D`<div class="settings-container"><p>Notifications</p><button @click="${this.clickOnNotifications}">Activate</button></div>`;return D`<h1>Settings</h1>${t}${s}${e}`}});function ui(t){return t.classList.contains("active-setting")}function pi(t){const e=t.querySelector("header i.fa-circle-user");[...t.querySelectorAll(".bottom-navi div.active-setting")].forEach((t=>t.classList.remove("active-setting"))),e.classList.remove("active-setting")}customElements.define("threads-menu",class extends J{static properties={threads:{type:Array}};#O=!1;constructor(){super(),this.threads=[],this.addEventListener("click",(t=>this.clickOnThreads(t)))}#I(t){if(rt){this.querySelector(".active-thread")?.classList.remove("active-thread"),t?.classList.add("active-thread")}}clickOnThreads(t){const e=t.target.expire?t.target:t.target.closest(".thread"),s=e.getAttribute("sender"),i=this.threads.find((t=>t.sender===s)),n=new CustomEvent("threadSelect",{bubbles:!1,detail:{...i}});return ot&&(ct.navi.classList.add("hide"),ct.menus.messagesMenu.classList.remove("hide"),ct.header.classList.add("hide"),ct.bottomNavi.classList.add("hide")),rt&&(ct.app.clickOnChat(t),ct.bottomNavi.querySelector("div").classList.add("active-setting")),this.#I(e),ct.menus.messagesMenu.messages=[],ct.menus.messagesMenu.conversationPartner=i,ct.menus.messagesMenu.setActive(i),ct.app.dispatchEvent(n)}createRenderRoot(){return this}bootStrap(){requestAnimationFrame((()=>{const t=this.querySelector(".thread");!this.#O&&t&&rt&&(t.click(),this.#O=!0)}))}render(){return hi(this.threads,(t=>t.id),(({endless:t,expire:e,nickname:s,sender:i,text:n,threadID:o,ts:r,type:a})=>{const c="system"===a,l=function(t){const e=new Date(t),s=Math.abs(new Date(t)-new Date)/36e5,i=e.toDateString(),n=e.toLocaleTimeString();return s<24?n.substring(0,5):s<168?e.toLocaleDateString("en",{weekday:"long"}):i}(r),h=D`<i class="fa-solid fa-${at[a]} thread-avatar"></i>`,d=t||c?D`<i class="fa-solid fa-check color-danger-font"></i>`:"",u=c?"":D`<span class="float-right">#${i}<span></span></span>`;return D`<div expire="${e}" id="${o}" sender="${i}" type="${a}" class="thread hover-background">${h}<div><p>${s}${d}${u}</p><p>${n.substring(0,23)} <span class="float-right unselectable">${l}</span></p></div></div>`}))}});customElements.define("app-layout",class extends J{static properties={ME:{type:Object}};#H={settingsMenu:{},messagesMenu:{},userMenu:{}};#P={};#U=document.querySelector("modal-window");#K=document.querySelector("invite-modal-window");#L=document.querySelector("panic-modal-window");#N=document.querySelector("conversation-modal-window");#R=document.querySelector("lock-modal-window");#D=document.querySelector("codes-modal-window");set ME(t){Object.values(this.#H).forEach((function(e){e.ME=t})),this.#D.ME=t,this.#R.ME=t,this.#L.ME=t,this.#K.ME=t,this.#N.ME=t,this.requestUpdate("ME",t)}constructor(){super(),this.ME=ht}createRenderRoot(){return this}clickOnChat(t){ui("DIV"===t.target.tagName?t.target:t.target.parentNode)||(this.setActiveMenu("messagesMenu"),pi(this))}clickOnUser({target:t}){ui(t)||(this.setActiveMenu("userMenu"),pi(this),t.classList.add("active-setting"))}clickOnSettings(t){const e="DIV"===t.target.tagName?t.target:t.target.parentNode;ui(e)||(this.setActiveMenu("settingsMenu"),pi(this),e.classList.add("active-setting"))}setActiveMenu(t){return Object.values(this.#H).forEach((function(t){t.classList.contains("hide")||t.classList.add("hide")})),ot&&"messagesMenu"!==t&&(ct.navi.classList.add("hide"),this.querySelector("main").classList.add("settings-mobile-menu-active")),ot&&"messagesMenu"===t?(ct.navi.classList.remove("hide"),void this.querySelector("main").classList.remove("settings-mobile-menu-active")):this.#H[t]&&this.#H[t].classList.contains("hide")?this.#H[t].classList.remove("hide"):void 0}clickOnNewConv(){return this.#N.open()}clickOnInvite(){return this.#K.open("join")}clickOnPanic(){return this.#L.open()}openWelcomeWindow({id:t,nickname:e}){return this.#U.setAndOpen({HTML:`<h1>Welcome to Be8</h1><p>your new ID is <i class="highlight-color">#${t}</i>, your nickname is <i class="highlight-color">${e}</i>. Everything gets deleted after 30 Days you can create as many accs as you want.</p>`})}firstUpdated(){super.connectedCallback();const t={messagesMenu:this.querySelector("messages-menu"),settingsMenu:this.querySelector("settings-menu"),userMenu:this.querySelector("user-menu")};ct.app=this,ct.menus=t,ct.threads=this.querySelector("threads-menu"),ct.settings=this.querySelector("settings-menu"),ct.user=this.querySelector("user-menu"),ct.navi=this.querySelector("nav"),ct.header=this.querySelector("header"),ct.bottomNavi=this.querySelector(".bottom-navi"),ct.toast=document.querySelector("toast-notification"),this.#H=t,this.#P=this.querySelector("threads-menu"),requestAnimationFrame((function(){ot||t.messagesMenu.focus()}))}async openLockModal(t){return this.#R.open(t)}setMessages(t){requestAnimationFrame((()=>{this.#H.messagesMenu.messages=t,this.#H.messagesMenu.scrollToBottom()}))}setThreads(t){this.#P.threads=t,this.#P.bootStrap()}render(){const t=D`<header><i @click="${t=>this.clickOnUser(t)}" class="fa-solid fa-circle-user hover-font"></i><i @click="${t=>this.clickOnNewConv(t)}" class="fa-solid fa-pen-clip float-right hover-font"></i></header>`,e=D`<div class="bottom-navi"><div @click="${t=>this.clickOnChat(t)}" class="active-setting hover-font"><i class="fa-solid fa-comments"></i><small>${lt.THREADSTITLE}</small></div><div @click="${t=>this.clickOnSettings(t)}" class="hover-font"><i class="fa-solid fa-gears"></i><small>Settings</small></div><div @click="${t=>this.clickOnInvite(t)}" class="hover-font"><i class="fa-solid fa-plus"></i><small>Invite</small></div><div @click="${t=>this.clickOnPanic(t)}" class="hover-font"><i class="fa-solid fa-bomb"></i><small>Panic</small></div></div>`,s=D`<messages-menu class="${ot?"hide":""}"></messages-menu><settings-menu class="hide"></settings-menu><user-menu class="hide"></user-menu>`;return D`${t}<nav><h1 class="chats-headline unselectable">Chats</h1><threads-menu></threads-menu></nav>${e}<main>${s}</main>`}});const yi={method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}},fi={method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}},gi=indexedDB.open("be8",1);function mi(){const t=self.crypto.randomUUID();return(new TextEncoder).encode(t)}function vi(t){const e=new Uint8Array(t);let s="";for(let t=0;t<e.byteLength;t++)s+=String.fromCharCode(e[t]);return window.btoa(s)}gi.onupgradeneeded=function(){const t=gi.result,e=t.createObjectStore("publicKeys",{keyPath:"accID"}),s=t.createObjectStore("privateKeys",{keyPath:"accID"}),i=t.createObjectStore("groupKeys",{keyPath:"accID"});[["crv","crv",{unique:!1}],["x","x",{unique:!1}],["y","y",{unique:!1}],["kty","kty",{unique:!1}],["key_ops","key_ops",{unique:!1}],["ext","ext",{unique:!1}]].forEach((function(t){e.createIndex(...t),s.createIndex(...t),i.createIndex(...t)}))},gi.onerror=t=>console.log(t);const wi=Object.freeze(["deriveKey","deriveBits"]),_i=Object.freeze({name:"ECDH",namedCurve:"P-384"});class ki{#z={};#j="";#q=new Map;#G=new Map;#F=new Map;#W=new Map;constructor(t,e){if(this.#j=t,this.#z=e,"string"!=typeof t||isNaN(t))throw`no acc id or wrong type passed to the constructor got ${t}`;if(!e)throw"no indexedDB passed to the constructor"}async setup(){const t=await this.getCachedKeys(),e=this.#z.result.transaction("privateKeys","readwrite").objectStore("privateKeys").getAll(),s=this.#j,i=await new Promise((function(t){e.onsuccess=function(e){return t(e.target.result.find((t=>t.accID===s)))}}));return i?(console.log("old acc"),this.#G.set(this.#j,i)):(console.log("brand new acc"),await this.generatePrivAndPubKey()),t.forEach((({accID:t,...e})=>this.#q.set(t,e))),t}getAccID(){return this.#j}hasGeneratedKeys(){const t=this.#q.has(this.#j),e=this.#G.has(this.#j);return t||console.log(`No public key for ${this.#j} in hasKeys`),e||console.log(`No private key for ${this.#j} in hasKeys`),t&&e}#X(t){const e=function(t){if(!t)throw"id is required in getTypeOfKey";return"g"===t.charAt(0)?"group":"c"===t.charAt(0)?"channel":"dialog"}(t);return"group"===e?this.#F.get(t):"channel"===e?this.#W.get(t):this.#q.get(t)}async addPublicKeys(t=[]){const e=this.#z.result.transaction("publicKeys","readwrite").objectStore("publicKeys");t.forEach((({accID:t,publicKey:e})=>this.#q.set(t,e)));const s=t.map((function({accID:t,publicKey:s}){e.put({accID:t,...s}),e.onsuccess=()=>console.log(`added public key for ${t}`)}));return await Promise.all(s)}addPublicKey(t,e){const s=this.#z.result.transaction("publicKeys","readwrite").objectStore("publicKeys");return t||console.log(`missing accID: "${t}" at addPublicKey`),e||console.log(`missing key: "${e}" at addPublicKey`),s.put({accID:t,...e}),this.#q.set(t,e)}addGroupKey(t,e){t&&e?this.#F.set(t,e):console.log(`missing accID: "${t}" or key: "${e}" in addGroupKey`)}async getCachedKeys(){const t=this.#z.result.transaction("publicKeys","readwrite").objectStore("publicKeys").getAll();return await new Promise((function(e){t.onsuccess=function(t){const s=t.target.result.map((t=>({accID:t.accID,publicKey:t})));return e(s)}}))}async generateGroupKeys(t){const{privateKey:e,publicKey:s}=await window.crypto.subtle.generateKey(_i,!0,wi),i=[window.crypto.subtle.exportKey("jwk",s),window.crypto.subtle.exportKey("jwk",e)],n=await Promise.all(i),o=this.#F.get(t);return o?(console.log(`Group keys for ${t} already exist`),o):(this.#F.set(t,n[1]),n)}async generatePrivAndPubKey(){const{privateKey:t,publicKey:e}=await window.crypto.subtle.generateKey(_i,!0,wi),s=[window.crypto.subtle.exportKey("jwk",e),window.crypto.subtle.exportKey("jwk",t)],i=await Promise.all(s),n=this.#z.result.transaction("privateKeys","readwrite"),o=this.#z.result.transaction("publicKeys","readwrite"),r=o.objectStore("publicKeys"),a=n.objectStore("privateKeys");return r.put({accID:this.#j,...i[0]}),a.put({accID:this.#j,...i[1]}),this.#q.set(this.#j,i[0]),this.#G.set(this.#j,i[1]),await n.complete,await o.complete,i}async getDerivedKey(t,e){if(!t)throw"no public key passed to getDerivedKey";if(!e)throw"no private key passed to getDerivedKey";const s=window.crypto.subtle.importKey("jwk",t,_i,!0,[]),i=window.crypto.subtle.importKey("jwk",e,_i,!0,wi);return Promise.all([s,i]).then((function([t,e]){return window.crypto.subtle.deriveKey({name:"ECDH",public:t},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}))}async encryptText(t,e=""){const s=(new TextEncoder).encode(e),i=mi(),n={name:"AES-GCM",iv:i};if(!t)throw"no derived key passed to encryptText";return window.crypto.subtle.encrypt(n,t,s).then((function(t){const e=new Uint8Array(t),s=String.fromCharCode.apply(null,e);return{cipherText:window.btoa(s),iv:i}}))}async decryptText(t,e="",s){const i=window.atob(e),n=new Uint8Array([...i].map((t=>t.charCodeAt(0)))),o={name:"AES-GCM",iv:s};if(!t)throw"no derived key passed to decryptText";if(!s)throw"no iv (Initialization vector) passed to decryptText";return window.crypto.subtle.decrypt(o,t,n).then((function(t){return(new TextDecoder).decode(t)}))}async encryptTextSimple(t,e,s){const i=this.#X(e),n=this.#G.get(t);if(!i)throw`Missing public key for ${e} at encryptTextSimple`;if(!n)throw`Missing private key for ${t} at encryptTextSimple`;const o=await this.getDerivedKey(i,n);return await this.encryptText(o,s)}async decryptTextSimple(t,e,s,i){const n=this.#X(t),o=this.#G.get(e);if(!n)throw`Missing public key for ${t} at decryptTextSimple`;if(!o)throw`Missing private key for ${e} at decryptTextSimple`;const r=await this.getDerivedKey(n,o);return await this.decryptText(r,s,i)}async encryptImage(t,e){const s=(new TextEncoder).encode(e),i=mi();if(!t)throw"no derived key passed to decryptText";return window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},t,s).then((function(t){return{cipherImage:vi(t),iv:i}}))}async decryptImage(t,e,s){const i=window.atob(e),n=new Uint8Array([...i].map((t=>t.charCodeAt(0)))),o={name:"AES-GCM",iv:s};if(!t)throw"no derived key passed to decryptText";return window.crypto.subtle.decrypt(o,t,n).then((function(t){return(new TextDecoder).decode(t)}))}async encryptImageSimple(t,e,s){const i=this.#X(e),n=this.#G.get(t);if(!i)throw`Missing public key for ${t} at encryptImageSimple`;if(!n)throw`Missing private key for ${e} at encryptImageSimple`;const o=await this.getDerivedKey(i,n);return await this.encryptImage(o,s)}async decryptImageSimple(t,e,s,i){const n=this.#X(t),o=this.#G.get(e);if(!n)throw`Missing public key for ${t} at decryptImageSimple`;if(!o)throw`Missing private key for ${e} at decryptImageSimple`;const r=await this.getDerivedKey(n,o);return await this.decryptImage(r,s,i)}async panic(){const t=[...this.#q.keys()],e=[...this.#G.keys()],s=[...this.#F.keys()],i=this.#z.result.transaction("publicKeys","readwrite"),n=this.#z.result.transaction("privateKeys","readwrite"),o=this.#z.result.transaction("groupKeys","readwrite"),r=i.objectStore("publicKeys"),a=n.objectStore("privateKeys"),c=o.objectStore("groupKeys"),l=t.map((function(t){return new Promise((function(e){return r.delete(t),e()}))})),h=e.map((function(t){return new Promise((function(e){return a.delete(t),e()}))})),d=s.map((function(t){return new Promise((function(e){return c.delete(t),e()}))}));await Promise.all([...l,...h,...d]),this.#q.clear(),this.#G.clear(),this.#F.clear(),this.#W.clear()}}const bi=document.querySelector("app-layout");function $i(t){bi.ME=t}async function Si({id:t}){return globalThis.be8=new ki(t,gi),await be8.setup()}async function Ei(){const t=await fetch("/getthreads",fi),{valid:e,threads:s}=await t.json();if(e)return bi.setThreads(s)}document.addEventListener("DOMContentLoaded",(async function(){const{error:t,accObj:e}=await fetch("/me",fi).then((t=>t.json()));if("NOTAUTH"===t)return await async function(){const t=await fetch("/newacc",{...yi,body:JSON.stringify({...ei(),nickname:`${Ws[Math.floor(Math.random()*Ws.length)]} ${Xs[Math.floor(Math.random()*Xs.length)]}`})});if((await t.json()).valid){const t=await fetch("/me",fi),{accObj:e}=await t.json();return $i(e),await Si(e),await Ei(),bi.openWelcomeWindow(e)}}();Si(e),$i(e),await bi.openLockModal((()=>Ei()))})),bi.addEventListener("unlock",(async function({detail:t}){const e=await fetch("/codeunlock",{...yi,body:JSON.stringify(t)}),{valid:s,isValid:i,isDestroyCode:n}=await e.json();return n&&location.reload(),s&&i?t.done():t.error()})),bi.addEventListener("panic",(async function({detail:t}){const e=await fetch("/destroyacc",fi),{valid:s}=await e.json();if(s)return await t.done()})),bi.addEventListener("inviteGenerated",(async function({detail:t}){await fetch("/invitelink",{...yi,body:JSON.stringify(t)})})),bi.addEventListener("changeNickName",(async function({detail:t}){const e=await fetch("/changenickname",{...yi,body:JSON.stringify(t)});if((await e.json()).valid){const t=await fetch("/me",fi),{accObj:e}=await t.json();return $i(e)}})),bi.addEventListener("setupCodes",(async function({detail:t}){const e=await fetch("/codeset",{...yi,body:JSON.stringify(t)});if((await e.json()).valid)return t.done()})),bi.addEventListener("updateCode",(async function({detail:t}){const e=await fetch("/codeupdate",{...yi,body:JSON.stringify(t)}),{valid:s,reason:i}=await e.json();return"OLDCODEWRONG"===i?t.oldCodeWrong():s?t.done():void 0})),bi.addEventListener("setStatus",(async function({detail:t}){await fetch("/statusset",{...yi,body:JSON.stringify(t)})})),bi.addEventListener("setToken",(async function({detail:t}){const e=await fetch("/endlessvalidate",{...yi,body:JSON.stringify({token:t.token})}),s=await e.json();if(s.valid&&s.validate){const e=await fetch("/me",fi),{accObj:i}=await e.json();return $i(i),t.success(s)}return"TOKENNOTEXIST"===s.error?t.wrongToken():!s.valid&&s.tokenInUse?t.tokenInUse():void 0})),bi.addEventListener("startConversation",(async function({detail:t}){const e=await fetch("/startConversation",{...yi,body:JSON.stringify(t)}),s=await e.json();return s.valid?t.success():"ACCNOTEXISTS"===s.error?t.idDoesNotExist():void 0})),bi.addEventListener("createGroup",(function({detail:t}){console.log(t),t.success()})),bi.addEventListener("threadSelect",(async function({detail:t}){const e=await fetch("/getmessages",{...yi,body:JSON.stringify(t)}),s=await e.json();if(s.valid)return bi.setMessages(s.messages)})),bi.addEventListener("writeMessage",(async function({detail:t}){console.log(t)})),bi.addEventListener("uploadMedia",(async function({detail:t}){console.log(t)}));
